import{r as y,p as g,s as x,d as o,o as n,a as t,e as l,F as h,j as v,y as d,k,t as i}from"./app-BikmxpuD.js";const f={class:"notifications-panel"},b={class:"bg-white shadow rounded-lg"},w={class:"px-4 py-5 sm:px-6 flex justify-between items-center"},C={class:"border-t border-gray-200"},S={key:0,class:"px-4 py-5 text-center text-gray-500"},D={key:1,class:"divide-y divide-gray-200"},N={class:"flex items-start"},B={class:"flex-1"},F={class:"text-sm text-gray-900"},A={class:"mt-1 flex items-center text-xs text-gray-500"},E={key:0,class:"ml-2"},M=["onClick"],L={__name:"NotificationsPanel",setup(j){const a=y([]),c=g(),u=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=e=>new Intl.NumberFormat("de-CH",{style:"currency",currency:"CHF"}).format(e),p=async e=>{try{await d.post(`/notifications/${e}/mark-as-read`),a.value=a.value.map(s=>s.id===e?{...s,read_at:new Date().toISOString()}:s)}catch(s){console.error("Error marking notification as read:",s)}},_=async()=>{try{await d.post("/notifications/mark-all-as-read"),a.value=a.value.map(e=>({...e,read_at:new Date().toISOString()}))}catch(e){console.error("Error marking all notifications as read:",e)}};return x(()=>{c.props.notifications&&(a.value=c.props.notifications)}),(e,s)=>(n(),o("div",f,[t("div",b,[t("div",w,[s[0]||(s[0]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Notifications",-1)),a.value.length>0?(n(),o("button",{key:0,onClick:_,class:"text-sm text-purple-600 hover:text-purple-800"}," Mark all as read ")):l("",!0)]),t("div",C,[a.value.length===0?(n(),o("div",S," No notifications yet ")):(n(),o("div",D,[(n(!0),o(h,null,v(a.value,r=>(n(),o("div",{key:r.id,class:k(["px-4 py-4 hover:bg-gray-50 transition-colors duration-150",{"bg-purple-50":!r.read_at}])},[t("div",N,[t("div",B,[t("p",F,i(r.data.message),1),t("div",A,[t("span",null,i(u(r.created_at)),1),r.data.bonus_amount?(n(),o("span",E," Bonus: "+i(m(r.data.bonus_amount)),1)):l("",!0)])]),r.read_at?l("",!0):(n(),o("button",{key:0,onClick:H=>p(r.id),class:"ml-4 text-sm text-purple-600 hover:text-purple-800"}," Mark as read ",8,M))])],2))),128))]))])])]))}};export{L as _};
