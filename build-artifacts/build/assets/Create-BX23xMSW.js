import{r as m,c as k,o as b,w as j,a as t,d as x,e as _,b as q,f as o,v as s,q as C,g as f,t as F,y as v}from"./app-BikmxpuD.js";import{D as V}from"./DashboardLayout-BlsjsCh-.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SidebarLink-BlIqNOVv.js";const D={class:"max-w-5xl mx-auto py-8"},P={class:"bg-gray-50 rounded-lg p-6 border"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A={class:"space-y-2"},M={class:"mt-4"},B={class:"space-y-2"},H={class:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},L={class:"bg-gray-50 rounded-lg p-6 border"},E={class:"flex items-center mb-2"},G={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2"},T={class:"bg-gray-50 rounded-lg p-6 border"},N={class:"flex items-center mb-2"},I={class:"bg-gray-50 rounded-lg p-6 border"},O={class:"flex items-center mb-2"},R={class:"flex justify-end gap-4"},z=["disabled"],J={key:0,class:"text-red-600 mb-2"},K={__name:"Create",setup(Q){const l=m({name:{de:"",fr:""},location:"",language:"de",start:"",end:"",allow_donation_until:"",description:{de:"",fr:""},image_landscape:null,image_square:null,flat_rate_enabled:!1,flat_rate_min_amount:"",flat_rate_help_text:"",unit_based_enabled:!1,public_donation_enabled:!1}),d=m(""),r=m(!1);function g(i,e){l.value[e]=i.target.files[0]}async function y(){var i,e;r.value=!0,d.value="";try{let a=null,p=null;if(l.value.image_landscape){const u=new FormData;u.append("image_landscape",l.value.image_landscape),a=(await v.post("/upload",u,{headers:{"Content-Type":"multipart/form-data"}})).data.image_landscape}if(l.value.image_square){const u=new FormData;u.append("image_square",l.value.image_square),p=(await v.post("/upload",u,{headers:{"Content-Type":"multipart/form-data"}})).data.image_square}const n=new FormData;n.append("name[de]",l.value.name.de),n.append("name[fr]",l.value.name.fr),n.append("description[de]",l.value.description.de),n.append("description[fr]",l.value.description.fr),n.append("location",l.value.location),n.append("language",l.value.language),n.append("start",l.value.start),n.append("end",l.value.end),n.append("allow_donation_until",l.value.allow_donation_until),a&&n.append("image_landscape",a),p&&n.append("image_square",p),n.append("flat_rate_enabled",l.value.flat_rate_enabled?"1":"0"),n.append("unit_based_enabled",l.value.unit_based_enabled?"1":"0"),n.append("public_donation_enabled",l.value.public_donation_enabled?"1":"0"),l.value.flat_rate_enabled&&(n.append("flat_rate_min_amount",l.value.flat_rate_min_amount),n.append("flat_rate_help_text",l.value.flat_rate_help_text)),await v.post("/dashboard/projects",n),window.location.href="/dashboard/projects"}catch(a){(e=(i=a.response)==null?void 0:i.data)!=null&&e.errors?d.value=Object.values(a.response.data.errors).flat().join(", "):d.value="Failed to create project."}r.value=!1}function c(){window.location.href="/dashboard/projects"}return(i,e)=>(b(),k(V,null,{default:j(()=>[t("div",D,[e[39]||(e[39]=t("h1",{class:"text-2xl font-bold mb-6"},"Add project",-1)),t("form",{onSubmit:q(y,["prevent"]),class:"space-y-8"},[t("div",P,[e[27]||(e[27]=t("h2",{class:"font-semibold text-lg mb-4"},"Project info",-1)),t("div",S,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium mb-1"},"Project name*",-1)),t("div",A,[t("div",null,[e[14]||(e[14]=t("label",{class:"text-xs text-gray-500"},"German",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name.de=a),type:"text",class:"input w-full",required:""},null,512),[[s,l.value.name.de]])])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium mb-1"},"Location",-1)),o(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.location=a),type:"text",class:"input w-full"},null,512),[[s,l.value.location]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium mb-1"},"Language*",-1)),o(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.language=a),class:"input w-full",required:""},e[17]||(e[17]=[t("option",{value:"de"},"German",-1),t("option",{value:"fr"},"French",-1)]),512),[[C,l.value.language]])]),e[22]||(e[22]=t("div",null,null,-1)),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-1"},"Start*",-1)),o(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.start=a),type:"date",class:"input w-full",required:""},null,512),[[s,l.value.start]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium mb-1"},"End*",-1)),o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.end=a),type:"date",class:"input w-full",required:""},null,512),[[s,l.value.end]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium mb-1"},"Allow donation until*",-1)),o(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.allow_donation_until=a),type:"date",class:"input w-full",required:""},null,512),[[s,l.value.allow_donation_until]])])]),t("div",M,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium mb-1"},"Project description*",-1)),t("div",B,[t("div",null,[e[23]||(e[23]=t("label",{class:"text-xs text-gray-500"},"German",-1)),o(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.description.de=a),rows:"5",class:"input w-full",required:""},null,512),[[s,l.value.description.de]])])])]),t("div",H,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium mb-1"},"Project image landscape format (1200x300px)*",-1)),t("input",{type:"file",onChange:e[7]||(e[7]=a=>g(a,"image_landscape")),class:"input w-full"},null,32)]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium mb-1"},"Project image square (400x400px)*",-1)),t("input",{type:"file",onChange:e[8]||(e[8]=a=>g(a,"image_square")),class:"input w-full"},null,32)])])]),t("div",L,[t("div",E,[e[28]||(e[28]=t("h2",{class:"font-semibold text-lg flex-1"},"Flat-rate donations",-1)),o(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=a=>l.value.flat_rate_enabled=a),class:"mr-2",id:"flat_rate_enabled"},null,512),[[f,l.value.flat_rate_enabled]]),e[29]||(e[29]=t("label",{for:"flat_rate_enabled",class:"text-sm"},"Activate flat-rate donations",-1))]),e[32]||(e[32]=t("p",{class:"text-sm text-gray-600 mb-2"},"Enable flat-rate donations. For example, a flat rate of CHF 20 for one participant.",-1)),l.value.flat_rate_enabled?(b(),x("div",G,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-1"},"Minimum amount (CHF)",-1)),o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.flat_rate_min_amount=a),type:"number",min:"0",step:"0.01",class:"input w-full"},null,512),[[s,l.value.flat_rate_min_amount]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-1"},"Help text",-1)),o(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>l.value.flat_rate_help_text=a),type:"text",class:"input w-full"},null,512),[[s,l.value.flat_rate_help_text]])])])):_("",!0)]),t("div",T,[t("div",N,[e[33]||(e[33]=t("h2",{class:"font-semibold text-lg flex-1"},"Unit-based donations",-1)),o(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=a=>l.value.unit_based_enabled=a),class:"mr-2",id:"unit_based_enabled"},null,512),[[f,l.value.unit_based_enabled]]),e[34]||(e[34]=t("label",{for:"unit_based_enabled",class:"text-sm"},"Allow unit-based donations",-1))]),e[35]||(e[35]=t("p",{class:"text-sm text-gray-600"},"Allow unit-based donations. For example, CHF 1 per lap run or per kg of waste paper collected.",-1))]),t("div",I,[t("div",O,[e[36]||(e[36]=t("h2",{class:"font-semibold text-lg flex-1"},"Public project donation page, banner and poster",-1)),o(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=a=>l.value.public_donation_enabled=a),class:"mr-2",id:"public_donation_enabled"},null,512),[[f,l.value.public_donation_enabled]]),e[37]||(e[37]=t("label",{for:"public_donation_enabled",class:"text-sm"},"Allow public project donations",-1))]),e[38]||(e[38]=t("p",{class:"text-sm text-gray-600"},"Receive a link to your project with an integrated donation form. Donations received through this form cannot be allocated to any member. Share this page on your channels to promote the project and receive additional donations.",-1))]),t("div",R,[t("button",{type:"button",onClick:c,class:"px-6 py-2 rounded bg-gray-100 text-gray-700"},"Cancel"),t("button",{type:"submit",disabled:r.value,class:"px-6 py-2 rounded bg-purple-600 text-white font-semibold"},"Save",8,z)])],32),d.value?(b(),x("div",J,F(d.value),1)):_("",!0)])]),_:1}))}},$=U(K,[["__scopeId","data-v-294cffab"]]);export{$ as default};
