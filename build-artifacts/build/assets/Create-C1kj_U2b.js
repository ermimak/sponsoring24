import{r as b,s as q,c as A,o as v,w as N,a as l,t as m,b as D,d as c,e as _,f as o,q as x,v as n,F as G,j as I,h as L,g as B,y,W as V}from"./app-BikmxpuD.js";import{D as h}from"./DashboardLayout-BlsjsCh-.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SidebarLink-BlIqNOVv.js";const j={class:"text-2xl font-bold mb-6"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},O={class:"bg-gray-50 rounded-lg p-6 border col-span-2"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"block text-sm font-medium mb-1"},$=["required"],H={class:"block text-sm font-medium mb-1"},J=["required"],K={class:"block text-sm font-medium mb-1"},Q=["required"],R={class:"flex flex-col gap-6"},X={class:"bg-gray-50 rounded-lg p-6 border"},Y={class:"mb-2"},Z={class:"block text-sm font-medium mb-1"},ee=["required"],le={class:"mb-2"},te={class:"mb-2"},se={class:"bg-gray-50 rounded-lg p-6 border"},ae=["value"],oe={class:"bg-gray-50 rounded-lg p-6 border"},de={class:"flex items-center"},ne={key:0,class:"text-red-600 mb-2"},ue={key:1,class:"text-gray-500 mb-2"},ie={class:"flex gap-4 mt-8"},re=["disabled"],me=["disabled"],pe={__name:"Create",props:{routeParams:{type:Object,default:()=>({})}},setup(C){const f=C,d=b(null),g=b([]),s=b({gender:"",company:"",first_name:"",last_name:"",address:"",address_suffix:"",postal_code:"",location:"",country:"",birthday:"",member_id:"",email:"",email_cc:"",phone:"",groups:[],archived:!1}),u=b(""),i=b(!1);async function U(){try{const r=await y.get("/dashboard/members/groups/data");g.value=r.data.map(e=>({id:e.id,name:e.name}))}catch{u.value="Failed to load groups. Please try again.",g.value=[]}}async function M(){var r,e,t,k;if(!d.value||isNaN(d.value)){u.value="Invalid member ID. Please select a valid member to edit.";return}try{i.value=!0;const a=(await y.get(`/dashboard/members/${d.value}`)).data;if(!a.id){u.value="Member not found. Please select a valid member.";return}s.value={gender:a.gender||"",first_name:a.first_name||"",last_name:a.last_name||"",company:a.company||"",address:a.address||"",address_suffix:a.address_suffix||"",postal_code:a.postal_code||"",location:a.location||"",country:a.country||"",birthday:a.birthday||"",member_id:a.member_id||"",email:a.email||"",email_cc:a.email_cc||"",phone:a.phone||"",groups:Array.isArray(a.member_groups)?a.member_groups.map(F=>F.name):[],archived:!!a.archived},console.log("Fetched member data:",a)}catch(p){console.error("Failed to fetch member:",((r=p.response)==null?void 0:r.data)||p.message),u.value=((e=p.response)==null?void 0:e.status)===404?"Member not found. Please select a valid member.":((k=(t=p.response)==null?void 0:t.data)==null?void 0:k.message)||"Failed to load member data. Please try again."}finally{i.value=!1}}async function w(){var r,e;i.value=!0,u.value="";try{const t={...s.value,groups:Array.isArray(s.value.groups)?s.value.groups:[]};d.value?await y.put(`/dashboard/members/${d.value}`,t):await y.post("/dashboard/members",t)}catch(t){u.value=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to save member."}finally{i.value=!1}}async function P(){await w(),u.value||V.visit("/dashboard/members")}function S(){V.visit("/dashboard/members")}return q(()=>{U(),f.routeParams.id&&!isNaN(f.routeParams.id)?(d.value=f.routeParams.id,M()):f.routeParams.id&&(u.value="Invalid member ID. Loading create form instead.")}),(r,e)=>(v(),A(h,null,{default:N(()=>[l("div",null,[l("h1",j,m(d.value?"Edit Member":"Add Member"),1),l("form",{onSubmit:D(w,["prevent"]),class:"space-y-8"},[l("div",z,[l("div",O,[e[26]||(e[26]=l("h2",{class:"font-semibold text-lg mb-4"},"Profile",-1)),l("div",T,[l("div",null,[l("label",W,"Gender"+m(d.value?"":"*"),1),o(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.gender=t),class:"input w-full",required:!d.value},e[16]||(e[16]=[l("option",{value:""},"Please select...",-1),l("option",{value:"female"},"Female",-1),l("option",{value:"male"},"Male",-1),l("option",{value:"other"},"Other",-1)]),8,$),[[x,s.value.gender]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium mb-1"},"Company",-1)),o(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.company=t),type:"text",class:"input w-full"},null,512),[[n,s.value.company]])]),l("div",null,[l("label",H,"First Name"+m(d.value?"":"*"),1),o(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.first_name=t),type:"text",class:"input w-full",required:!d.value},null,8,J),[[n,s.value.first_name]])]),l("div",null,[l("label",K,"Last Name"+m(d.value?"":"*"),1),o(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.last_name=t),type:"text",class:"input w-full",required:!d.value},null,8,Q),[[n,s.value.last_name]])]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium mb-1"},"Address",-1)),o(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.address=t),type:"text",class:"input w-full"},null,512),[[n,s.value.address]])]),l("div",null,[e[19]||(e[19]=l("label",{class:"block text-sm font-medium mb-1"},"Address Suffix",-1)),o(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.address_suffix=t),type:"text",class:"input w-full"},null,512),[[n,s.value.address_suffix]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium mb-1"},"Postal Code",-1)),o(l("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.postal_code=t),type:"text",class:"input w-full"},null,512),[[n,s.value.postal_code]])]),l("div",null,[e[21]||(e[21]=l("label",{class:"block text-sm font-medium mb-1"},"Location",-1)),o(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.location=t),type:"text",class:"input w-full"},null,512),[[n,s.value.location]])]),l("div",null,[e[23]||(e[23]=l("label",{class:"block text-sm font-medium mb-1"},"Country",-1)),o(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.country=t),class:"input w-full"},e[22]||(e[22]=[l("option",{value:""},"Select Country",-1),l("option",{value:"Switzerland"},"Switzerland",-1),l("option",{value:"Germany"},"Germany",-1),l("option",{value:"France"},"France",-1)]),512),[[x,s.value.country]])]),l("div",null,[e[24]||(e[24]=l("label",{class:"block text-sm font-medium mb-1"},"Birthday",-1)),o(l("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.birthday=t),type:"date",class:"input w-full"},null,512),[[n,s.value.birthday]])]),l("div",null,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium mb-1"},"Member ID",-1)),o(l("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>s.value.member_id=t),type:"text",class:"input w-full"},null,512),[[n,s.value.member_id]])])])]),l("div",R,[l("div",X,[e[29]||(e[29]=l("h2",{class:"font-semibold text-lg mb-4"},"Contact",-1)),l("div",Y,[l("label",Z,"E-mail"+m(d.value?"":"*"),1),o(l("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.email=t),type:"email",class:"input w-full",required:!d.value},null,8,ee),[[n,s.value.email]])]),l("div",le,[e[27]||(e[27]=l("label",{class:"block text-sm font-medium mb-1"},"Email CC",-1)),o(l("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.email_cc=t),type:"email",class:"input w-full"},null,512),[[n,s.value.email_cc]])]),l("div",te,[e[28]||(e[28]=l("label",{class:"block text-sm font-medium mb-1"},"Phone",-1)),o(l("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>s.value.phone=t),type:"text",class:"input w-full"},null,512),[[n,s.value.phone]])])]),l("div",se,[e[30]||(e[30]=l("h2",{class:"font-semibold text-lg mb-4"},"Member Groups",-1)),e[31]||(e[31]=l("label",{class:"block text-sm font-medium mb-1"},"Member Groups",-1)),o(l("select",{"onUpdate:modelValue":e[14]||(e[14]=t=>s.value.groups=t),class:"input w-full",multiple:""},[(v(!0),c(G,null,I(g.value,t=>(v(),c("option",{key:t.id,value:t.name},m(t.name),9,ae))),128))],512),[[x,s.value.groups]]),e[32]||(e[32]=l("p",{class:"text-xs text-gray-500 mt-1"},"Select one or more groups (Ctrl+click for multiple).",-1))]),l("div",oe,[e[34]||(e[34]=l("h2",{class:"font-semibold text-lg mb-4"},"Settings",-1)),l("label",de,[o(l("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=t=>s.value.archived=t),class:"mr-2"},null,512),[[B,s.value.archived]]),e[33]||(e[33]=L(" Archived "))])])])]),u.value?(v(),c("div",ne,m(u.value),1)):_("",!0),i.value?(v(),c("div",ue,"Loading member data...")):_("",!0),l("div",ie,[l("button",{type:"submit",disabled:i.value,class:"px-6 py-2 rounded bg-purple-600 text-white font-semibold"},m(i.value?"Saving...":"Save"),9,re),l("button",{type:"button",onClick:P,disabled:i.value,class:"px-6 py-2 rounded bg-purple-600 text-white font-semibold"},m(i.value?"Saving...":"Save and Close"),9,me),l("button",{type:"button",onClick:S,class:"px-6 py-2 rounded bg-gray-100 text-gray-700"},"Cancel")])],32)])]),_:1}))}},ye=E(pe,[["__scopeId","data-v-7d169dd8"]]);export{ye as default};
