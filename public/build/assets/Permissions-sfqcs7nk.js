import{r as u,s as $,d as r,o as d,a as e,e as V,b as x,f as m,v,F as g,j as w,t as c,y as n,g as M}from"./app-BDDThPdq.js";/* empty css            */const U={class:"mb-4"},R={class:"min-w-full bg-white border"},S={class:"border px-4 py-2"},A={class:"border px-4 py-2"},B={class:"border px-4 py-2"},D=["onClick"],E=["onClick"],L={key:0,class:"mt-6 p-4 border rounded bg-gray-50"},N={class:"font-semibold mb-2"},q={class:"mt-4"},F=["value","onChange"],I={class:"ml-1"},H={__name:"Permissions",setup(j){const y=u([]),f=u([]),i=u({name:"",label:""}),o=u(null),p=u([]);async function b(){const l=await n.get("/api/permissions");y.value=l.data}async function P(){const l=await n.get("/api/roles");f.value=l.data}$(()=>{b(),P()});async function h(){await n.post("/api/permissions",i.value),i.value={name:"",label:""},b()}function k(l){o.value={...l},p.value=(l.roles||[]).map(s=>s.id)}async function _(){await n.put(`/api/permissions/${o.value.id}`,o.value);for(const l of f.value){const s=p.value.includes(l.id),t=(o.value.roles||[]).some(a=>a.id===l.id);s&&!t?await n.post(`/api/permissions/${o.value.id}/assign-role`,{role_id:l.id}):!s&&t&&await n.post(`/api/permissions/${o.value.id}/remove-role`,{role_id:l.id})}o.value=null,b()}async function C(l){await n.delete(`/api/permissions/${l}`),b()}function T(l){}return(l,s)=>(d(),r("div",null,[s[10]||(s[10]=e("h1",{class:"text-2xl font-bold mb-4"},"Permissions Management",-1)),e("div",U,[e("form",{onSubmit:x(h,["prevent"])},[m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.value.name=t),placeholder:"Permission name",class:"border p-2 mr-2",required:""},null,512),[[v,i.value.name]]),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value.label=t),placeholder:"Label (optional)",class:"border p-2 mr-2"},null,512),[[v,i.value.label]]),s[6]||(s[6]=e("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded"},"Add Permission",-1))],32)]),e("table",R,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",{class:"border px-4 py-2"},"Name"),e("th",{class:"border px-4 py-2"},"Label"),e("th",{class:"border px-4 py-2"},"Actions")])],-1)),e("tbody",null,[(d(!0),r(g,null,w(y.value,t=>(d(),r("tr",{key:t.id},[e("td",S,c(t.name),1),e("td",A,c(t.label),1),e("td",B,[e("button",{onClick:a=>k(t),class:"text-blue-600 mr-2"},"Edit",8,D),e("button",{onClick:a=>C(t.id),class:"text-red-600"},"Delete",8,E)])]))),128))])]),o.value?(d(),r("div",L,[e("h2",N,"Edit Permission: "+c(o.value.name),1),e("form",{onSubmit:x(_,["prevent"])},[m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.name=t),class:"border p-2 mr-2",required:""},null,512),[[v,o.value.name]]),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.label=t),class:"border p-2 mr-2"},null,512),[[v,o.value.label]]),s[8]||(s[8]=e("button",{type:"submit",class:"bg-green-600 text-white px-4 py-2 rounded"},"Save",-1)),e("button",{onClick:s[4]||(s[4]=t=>o.value=null),type:"button",class:"ml-2 px-4 py-2 rounded border"},"Cancel")],32),e("div",q,[s[9]||(s[9]=e("h3",{class:"font-semibold mb-1"},"Assign to Roles",-1)),e("div",null,[(d(!0),r(g,null,w(f.value,t=>(d(),r("label",{key:t.id,class:"inline-flex items-center mr-3"},[m(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":s[5]||(s[5]=a=>p.value=a),onChange:a=>(t.id,void 0)},null,40,F),[[M,p.value]]),e("span",I,c(t.name),1)]))),128))])])])):V("",!0)]))}};export{H as default};
