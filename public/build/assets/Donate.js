import{k as u,o as d,y as i,f as e,t as n,j as _,q as s,v as a,G as w,z as C,i as b,N as j,m as c,p as k,W as x}from"./vendor.js";import{_ as M}from"./_plugin-vue_export-helper.js";const U={__name:"Donate",props:{project:Object,participant:Object,step:String,confirmation_email:String,confirmation_link:String,message:String},setup(g,{expose:t}){t();const o=g,l=j(),p=c({amount:0,currency:"CHF",gender:"Masculine",first_name:"",last_name:"",company:"",address:"",address_suffix:"",postal_code:"",location:"",country:"Switzerland",email:"",phone:"",privacy_policy:!1}),m=c({}),r=c(!1),h=k(()=>{var f,v;return{success:((f=l.props.flash)==null?void 0:f.success)||"",error:((v=l.props.flash)==null?void 0:v.error)||""}});function V(){if(r.value=!0,m.value={},o.project.flat_rate_enabled&&o.project.flat_rate_min_amount>0&&p.value.amount<o.project.flat_rate_min_amount){m.value={amount:[`Minimum donation amount is CHF ${o.project.flat_rate_min_amount}`]},r.value=!1;return}x.post(`/projects/${o.project.id}/participants/${o.participant.id}/donate`,{...p.value,step:o.step==="donation"?"donation":"confirmation"},{onSuccess:()=>{r.value=!1,console.log("Form submission successful. Current step:",o.step)},onError:f=>{m.value=f,r.value=!1,console.error("Form submission failed:",f)}})}function S(){x.visit(route("dashboard"))}const y={props:o,page:l,form:p,errors:m,loading:r,flashMessage:h,submitDonation:V,closeModal:S,ref:c,computed:k,get router(){return x},get usePage(){return j}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},F={class:"min-h-screen bg-gray-50"},q={class:"relative w-full h-64"},D=["src"],P={class:"max-w-4xl mx-auto py-10 px-4 sm:px-6 lg:px-8"},H={class:"bg-white shadow-lg rounded-lg p-8"},O={key:0},z={class:"text-4xl font-bold text-gray-900 mb-2"},I={class:"text-sm text-gray-500 mb-6"},B={class:"text-gray-600 mb-8"},E={class:"text-2xl font-semibold text-gray-900 mb-4"},N={class:"relative"},T=["min"],A={key:0,class:"text-sm text-gray-600 mt-2 mb-4"},Y={key:1,class:"text-sm text-blue-600 mt-2 mb-4"},G={type:"submit",class:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"},L={key:1},W={class:"text-4xl font-bold text-gray-900 mb-2"},J={class:"text-sm text-gray-500 mb-6"},K={class:"text-gray-600 mb-8"},Q={class:"text-gray-700 mb-6"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"flex items-center"},Z={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50"},$={class:"bg-white p-6 rounded-lg shadow-lg max-w-md"},ee={class:"text-gray-600 mb-4"},te={class:"text-gray-900 font-medium"},oe={key:3,class:"text-center py-12"},le={class:"text-3xl font-bold text-gray-900 mb-4"},re=["href"];function ne(g,t,o,l,p,m){return d(),u("div",F,[i(" Header Image "),e("div",q,[e("img",{src:o.project.image_url,alt:"Event Image",class:"w-full h-full object-cover"},null,8,D),t[13]||(t[13]=e("div",{class:"absolute top-4 right-4"},[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white bg-opacity-80 text-purple-600"},"Sponsoring24")],-1))]),i(" Main Content "),e("main",P,[e("div",H,[o.step==="donation"?(d(),u("div",O,[e("h1",z,n(o.project.name),1),e("div",I,[e("span",null,n(o.project.date)+" "+n(o.project.time),1),t[14]||(t[14]=e("span",{class:"mx-2"},"•",-1)),e("span",null,"@ "+n(o.project.location),1)]),e("p",B,n(o.project.description),1),e("h2",E,"Your support for "+n(o.participant.first_name)+" "+n(o.participant.last_name),1),t[16]||(t[16]=e("div",{class:"flex items-center space-x-4 mb-6"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-purple-100 text-purple-600"},"•"),e("span",{class:"text-gray-700"},"Flat-rate donation")],-1)),e("form",{onSubmit:_(l.submitDonation,["prevent"]),class:"space-y-6"},[e("div",N,[s(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>l.form.amount=r),type:"number",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:"",min:o.project.flat_rate_enabled&&o.project.flat_rate_min_amount||0,step:"0.01",placeholder:"0.00"},null,8,T),[[a,l.form.amount]]),t[15]||(t[15]=e("span",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"},"CHF",-1))]),o.project.flat_rate_enabled&&o.project.flat_rate_help_text?(d(),u("div",A,n(o.project.flat_rate_help_text),1)):i("v-if",!0),o.project.flat_rate_enabled&&o.project.flat_rate_min_amount>0?(d(),u("div",Y," Minimum donation amount: CHF "+n(o.project.flat_rate_min_amount),1)):i("v-if",!0),e("button",G," CHF "+n(l.form.amount||0)+" support ",1)],32)])):i("v-if",!0),o.step==="confirmation"?(d(),u("div",L,[e("h1",W,n(o.project.name),1),e("div",J,[e("span",null,n(o.project.date)+" "+n(o.project.time),1),t[17]||(t[17]=e("span",{class:"mx-2"},"•",-1)),e("span",null,"@ "+n(o.project.location),1)]),e("p",K,n(o.project.description),1),t[33]||(t[33]=e("p",{class:"text-gray-700 mb-6"},"Please complete the form below with your personal details.",-1)),e("p",Q,"Your flat-rate donation: CHF "+n(l.form.amount||100),1),e("form",{onSubmit:_(l.submitDonation,["prevent"]),class:"space-y-6"},[e("div",R,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gender *",-1)),s(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>l.form.gender=r),class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},t[18]||(t[18]=[e("option",{value:"Masculine"},"Masculine",-1),e("option",{value:"Feminine"},"Feminine",-1),e("option",{value:"Other"},"Other",-1)]),512),[[w,l.form.gender]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"First name *",-1)),s(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>l.form.first_name=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.first_name]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Last name *",-1)),s(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.form.last_name=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.last_name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Company",-1)),s(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.form.company=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[a,l.form.company]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Address *",-1)),s(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>l.form.address=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.address]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Address suffix",-1)),s(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>l.form.address_suffix=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[a,l.form.address_suffix]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Postal code *",-1)),s(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>l.form.postal_code=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.postal_code]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Location *",-1)),s(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>l.form.location=r),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.location]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Country *",-1)),s(e("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>l.form.country=r),class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},t[27]||(t[27]=[e("option",{value:"Switzerland"},"Switzerland",-1),e("option",{value:"Other"},"Other",-1)]),512),[[w,l.form.country]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"E-mail *",-1)),s(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>l.form.email=r),type:"email",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Phone *",-1)),s(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>l.form.phone=r),type:"tel",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,l.form.phone]])])]),e("div",X,[s(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>l.form.privacy_policy=r),type:"checkbox",class:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",required:""},null,512),[[C,l.form.privacy_policy]]),t[31]||(t[31]=e("label",{class:"ml-2 text-sm text-gray-700"},[b("I accept the "),e("a",{href:"#",class:"text-purple-600 hover:underline"},"privacy policy"),b(" and the "),e("a",{href:"#",class:"text-purple-600 hover:underline"},"terms and conditions of participation"),b(".*")],-1))]),t[32]||(t[32]=e("button",{type:"submit",class:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"}," Save ",-1))],32)])):i("v-if",!0),o.step==="modal"?(d(),u("div",Z,[e("div",$,[t[34]||(t[34]=e("h2",{class:"text-3xl font-bold text-gray-900 mb-4"},"Almost finished!",-1)),e("p",ee,"To confirm your donation, please click the link sent to you via email at "+n(o.confirmation_email)+".",1),t[35]||(t[35]=e("p",{class:"text-gray-600 mb-6"},"It may take some time for the email to reach your inbox. Please also check your spam folder if you don't receive the email.",-1)),t[36]||(t[36]=e("p",{class:"text-gray-600 mb-6"},"Thank you very much,",-1)),e("p",te,n(o.project.name),1),e("div",{class:"mt-6 flex justify-end"},[e("button",{onClick:l.closeModal,class:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"},"Close")])])])):i("v-if",!0),o.step==="confirmed"?(d(),u("div",oe,[e("h2",le,n(o.message),1),t[37]||(t[37]=e("p",{class:"text-gray-600 mb-6"},"Your donation has been successfully processed.",-1)),e("a",{href:g.route("dashboard"),class:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"},"Back to Dashboard",8,re)])):i("v-if",!0)])])])}const ie=M(U,[["render",ne],["__scopeId","data-v-7b5c041d"],["__file","/var/www/html/resources/js/Pages/Projects/Participants/Donate.vue"]]);export{ie as default};
