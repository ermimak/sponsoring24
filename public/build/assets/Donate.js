import{O as h,g,J as V,l as d,o as m,f as e,y as p,t as n,k as v,p as r,v as a,G as w,z as C,j as b,W as j}from"./vendor.js";import{_ as S}from"./_plugin-vue_export-helper.js";const U={class:"min-h-screen bg-gray-50"},F={class:"relative w-full h-64"},q=["src"],M={class:"max-w-4xl mx-auto py-10 px-4 sm:px-6 lg:px-8"},O={class:"bg-white shadow-lg rounded-lg p-8"},D={key:0},H={class:"text-4xl font-bold text-gray-900 mb-2"},z={class:"text-sm text-gray-500 mb-6"},B={class:"text-gray-600 mb-8"},E={class:"text-2xl font-semibold text-gray-900 mb-4"},I={class:"relative"},P=["min"],T={key:0,class:"text-sm text-gray-600 mt-2 mb-4"},A={key:1,class:"text-sm text-blue-600 mt-2 mb-4"},N={type:"submit",class:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"},Y={key:1},$={class:"text-4xl font-bold text-gray-900 mb-2"},G={class:"text-sm text-gray-500 mb-6"},L={class:"text-gray-600 mb-8"},W={class:"text-gray-700 mb-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={class:"flex items-center"},Q={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50"},R={class:"bg-white p-6 rounded-lg shadow-lg max-w-md"},X={class:"text-gray-600 mb-4"},Z={class:"text-gray-900 font-medium"},_={key:3,class:"text-center py-12"},ee={class:"text-3xl font-bold text-gray-900 mb-4"},te=["href"],oe={__name:"Donate",props:{project:Object,participant:Object,step:String,confirmation_email:String,confirmation_link:String,message:String},setup(l){const i=l,x=h(),o=g({amount:0,currency:"CHF",gender:"Masculine",first_name:"",last_name:"",company:"",address:"",address_suffix:"",postal_code:"",location:"",country:"Switzerland",email:"",phone:"",privacy_policy:!1}),c=g({}),f=g(!1);V(()=>{var u,t;return{success:((u=x.props.flash)==null?void 0:u.success)||"",error:((t=x.props.flash)==null?void 0:t.error)||""}});function y(){if(f.value=!0,c.value={},i.project.flat_rate_enabled&&i.project.flat_rate_min_amount>0&&o.value.amount<i.project.flat_rate_min_amount){c.value={amount:[`Minimum donation amount is CHF ${i.project.flat_rate_min_amount}`]},f.value=!1;return}j.post(`/projects/${i.project.id}/participants/${i.participant.id}/donate`,{...o.value,step:i.step==="donation"?"donation":"confirmation"},{onSuccess:()=>{f.value=!1,console.log("Form submission successful. Current step:",i.step)},onError:u=>{c.value=u,f.value=!1,console.error("Form submission failed:",u)}})}function k(){j.visit(route("dashboard"))}return(u,t)=>(m(),d("div",U,[e("div",F,[e("img",{src:l.project.image_url,alt:"Event Image",class:"w-full h-full object-cover"},null,8,q),t[13]||(t[13]=e("div",{class:"absolute top-4 right-4"},[e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white bg-opacity-80 text-purple-600"},"fundo")],-1))]),e("main",M,[e("div",O,[l.step==="donation"?(m(),d("div",D,[e("h1",H,n(l.project.name),1),e("div",z,[e("span",null,n(l.project.date)+" "+n(l.project.time),1),t[14]||(t[14]=e("span",{class:"mx-2"},"•",-1)),e("span",null,"@ "+n(l.project.location),1)]),e("p",B,n(l.project.description),1),e("h2",E,"Your support for "+n(l.participant.first_name)+" "+n(l.participant.last_name),1),t[16]||(t[16]=e("div",{class:"flex items-center space-x-4 mb-6"},[e("span",{class:"flex items-center justify-center w-6 h-6 rounded-full bg-purple-100 text-purple-600"},"•"),e("span",{class:"text-gray-700"},"Flat-rate donation")],-1)),e("form",{onSubmit:v(y,["prevent"]),class:"space-y-6"},[e("div",I,[r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.amount=s),type:"number",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:"",min:l.project.flat_rate_enabled&&l.project.flat_rate_min_amount||0,step:"0.01",placeholder:"0.00"},null,8,P),[[a,o.value.amount]]),t[15]||(t[15]=e("span",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"},"CHF",-1))]),l.project.flat_rate_enabled&&l.project.flat_rate_help_text?(m(),d("div",T,n(l.project.flat_rate_help_text),1)):p("",!0),l.project.flat_rate_enabled&&l.project.flat_rate_min_amount>0?(m(),d("div",A," Minimum donation amount: CHF "+n(l.project.flat_rate_min_amount),1)):p("",!0),e("button",N," CHF "+n(o.value.amount||0)+" support ",1)],32)])):p("",!0),l.step==="confirmation"?(m(),d("div",Y,[e("h1",$,n(l.project.name),1),e("div",G,[e("span",null,n(l.project.date)+" "+n(l.project.time),1),t[17]||(t[17]=e("span",{class:"mx-2"},"•",-1)),e("span",null,"@ "+n(l.project.location),1)]),e("p",L,n(l.project.description),1),t[33]||(t[33]=e("p",{class:"text-gray-700 mb-6"},"Please complete the form below with your personal details.",-1)),e("p",W,"Your flat-rate donation: CHF "+n(o.value.amount||100),1),e("form",{onSubmit:v(y,["prevent"]),class:"space-y-6"},[e("div",J,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gender *",-1)),r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.gender=s),class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},t[18]||(t[18]=[e("option",{value:"Masculine"},"Masculine",-1),e("option",{value:"Feminine"},"Feminine",-1),e("option",{value:"Other"},"Other",-1)]),512),[[w,o.value.gender]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"First name *",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.first_name=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.first_name]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Last name *",-1)),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.last_name=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.last_name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Company",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.company=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[a,o.value.company]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Address *",-1)),r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.address=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.address]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Address suffix",-1)),r(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.address_suffix=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[a,o.value.address_suffix]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Postal code *",-1)),r(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.postal_code=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.postal_code]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Location *",-1)),r(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.location=s),type:"text",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.location]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Country *",-1)),r(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.country=s),class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},t[27]||(t[27]=[e("option",{value:"Switzerland"},"Switzerland",-1),e("option",{value:"Other"},"Other",-1)]),512),[[w,o.value.country]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"E-mail *",-1)),r(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.email=s),type:"email",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700"},"Phone *",-1)),r(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.value.phone=s),type:"tel",class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:""},null,512),[[a,o.value.phone]])])]),e("div",K,[r(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.value.privacy_policy=s),type:"checkbox",class:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",required:""},null,512),[[C,o.value.privacy_policy]]),t[31]||(t[31]=e("label",{class:"ml-2 text-sm text-gray-700"},[b("I accept the "),e("a",{href:"#",class:"text-purple-600 hover:underline"},"privacy policy"),b(" and the "),e("a",{href:"#",class:"text-purple-600 hover:underline"},"terms and conditions of participation"),b(".*")],-1))]),t[32]||(t[32]=e("button",{type:"submit",class:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"}," Save ",-1))],32)])):p("",!0),l.step==="modal"?(m(),d("div",Q,[e("div",R,[t[34]||(t[34]=e("h2",{class:"text-3xl font-bold text-gray-900 mb-4"},"Almost finished!",-1)),e("p",X,"To confirm your donation, please click the link sent to you via email at "+n(l.confirmation_email)+".",1),t[35]||(t[35]=e("p",{class:"text-gray-600 mb-6"},"It may take some time for the email to reach your inbox. Please also check your spam folder if you don't receive the email.",-1)),t[36]||(t[36]=e("p",{class:"text-gray-600 mb-6"},"Thank you very much,",-1)),e("p",Z,n(l.project.name),1),e("div",{class:"mt-6 flex justify-end"},[e("button",{onClick:k,class:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"},"Close")])])])):p("",!0),l.step==="confirmed"?(m(),d("div",_,[e("h2",ee,n(l.message),1),t[37]||(t[37]=e("p",{class:"text-gray-600 mb-6"},"Your donation has been successfully processed.",-1)),e("a",{href:u.route("dashboard"),class:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition duration-200 font-medium"},"Back to Dashboard",8,te)])):p("",!0)])])]))}},ne=S(oe,[["__scopeId","data-v-79281fba"]]);export{ne as default};
