import{r as d,s as G,c as C,o as r,w as M,a as t,d as n,e as u,h as v,t as p,u as N,W as B,F as D,j as F,f as $,v as V,y as b}from"./app-BDDThPdq.js";import{D as j}from"./DashboardLayout-DX3pOCJ2.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./SidebarLink-BeQ8zajy.js";const L={class:"flex justify-between items-center mb-6"},T={class:"text-2xl font-bold"},E={class:"text-gray-400 text-base font-normal"},S={class:"flex gap-2 items-center"},W={class:"bg-white rounded-lg border"},q={class:"min-w-full divide-y divide-gray-200"},z={class:"bg-white divide-y divide-gray-200"},I={class:"px-6 py-4 whitespace-nowrap"},U={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},H=["onClick","disabled"],J={key:0},K={key:0,class:"p-4 text-center text-gray-500"},O={key:1,class:"p-4 text-center text-red-500"},P={key:2,class:"p-4 text-center text-green-500"},Q={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},R={class:"bg-white rounded-lg p-6 w-full max-w-md"},X={class:"mb-4"},Z={class:"flex gap-4"},ee=["disabled"],te={__name:"Groups",setup(se){const c=d([]),a=d(!1),l=d(""),m=d(""),f=d(!1),i=d("");async function x(){var o,e;try{a.value=!0;const s=await b.get("/dashboard/members/groups/data");c.value=s.data}catch(s){l.value=((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to load groups."}finally{a.value=!1}}async function _(){var o,e;if(!i.value.trim()){l.value="Group name is required.";return}try{a.value=!0,await b.post("/dashboard/members/groups",{name:i.value.trim()}),m.value="Group created successfully!",i.value="",f.value=!1,await x()}catch(s){l.value=((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to create group."}finally{a.value=!1}}async function w(o){var e,s,g,h;if(confirm(`Are you sure you want to delete the group "${o.name}"? This will remove it from all members.`))try{a.value=!0,await b.delete(`/dashboard/members/groups/${o.id}`),m.value="Group deleted successfully!",await x()}catch(y){l.value=((e=y.response)==null?void 0:e.status)===404?"Group not found.":((s=y.response)==null?void 0:s.status)===403?"You do not have permission to delete this group.":((h=(g=y.response)==null?void 0:g.data)==null?void 0:h.message)||"Failed to delete group."}finally{a.value=!1}}function k(){i.value="",l.value="",f.value=!0}return G(()=>{x()}),(o,e)=>(r(),C(j,null,{default:M(()=>[t("div",null,[t("div",L,[t("h1",T,[e[3]||(e[3]=v("Member Groups ")),t("span",E,p(c.value.length)+" groups",1)]),t("div",S,[t("button",{onClick:k,class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded flex items-center"},e[4]||(e[4]=[t("i",{class:"fas fa-plus mr-2"},null,-1),v(" Add Group ")])),t("button",{onClick:e[0]||(e[0]=s=>N(B).visit("/dashboard/members")),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded flex items-center"},e[5]||(e[5]=[t("i",{class:"fas fa-users mr-2"},null,-1),v(" Back to Members ")]))])]),t("div",W,[t("table",q,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Members"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",z,[(r(!0),n(D,null,F(c.value,s=>(r(),n("tr",{key:s.id},[t("td",I,p(s.name),1),t("td",U,p(s.member_count),1),t("td",Y,[t("button",{onClick:g=>w(s),class:"text-red-600 hover:text-red-900 flex items-center gap-1",disabled:a.value},e[6]||(e[6]=[t("i",{class:"fas fa-trash"},null,-1),v(" Delete ")]),8,H)])]))),128)),c.value.length===0?(r(),n("tr",J,e[7]||(e[7]=[t("td",{colspan:"3",class:"px-6 py-4 text-center text-gray-400"},"No groups found ðŸ¥º",-1)]))):u("",!0)])])]),a.value?(r(),n("div",K,"Loading...")):u("",!0),l.value?(r(),n("div",O,p(l.value),1)):u("",!0),m.value?(r(),n("div",P,p(m.value),1)):u("",!0),f.value?(r(),n("div",Q,[t("div",R,[e[10]||(e[10]=t("h2",{class:"text-xl font-bold mb-4"},"Create Group",-1)),t("div",X,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium mb-1"},"Group Name",-1)),$(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),type:"text",class:"input w-full",placeholder:"Enter group name"},null,512),[[V,i.value]])]),t("div",Z,[t("button",{onClick:_,class:"px-4 py-2 rounded bg-purple-600 text-white font-semibold",disabled:a.value},"Save",8,ee),t("button",{onClick:e[2]||(e[2]=s=>f.value=!1),class:"px-4 py-2 rounded bg-gray-100 text-gray-700"},"Cancel")])])])):u("",!0)])]),_:1}))}},ie=A(te,[["__scopeId","data-v-bc9a8924"]]);export{ie as default};
