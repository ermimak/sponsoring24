import{k as u,o as m,y as w,f as e,i as a,j as H,q as f,G as D,v as y,t as d,z as W,F as A,l as U,n as ae,N as Y,m as c,I as K,R as I,p as ne,a as j,s as V,S as ie,W as de}from"./vendor.js";import{_ as ue}from"./_plugin-vue_export-helper.js";const me={__name:"DonationsTab",props:{project:Object,filters:Object,donations:Array},setup(P,{expose:t}){var R,J;t();const i=P,o=Y(),_=c([]),b=c({status:i.filters.status||"",date_from:i.filters.date_from||"",date_to:i.filters.date_to||"",amount_min:i.filters.amount_min||"",amount_max:i.filters.amount_max||""}),p=c([]),r=c(!1),M=c(!1),z=c(!1),C=c(null),k=c([]),E=c(!1),v=c({template_id:"",subject:"",body:""}),x=c({template_id:"",subject:"",body:""}),T=c(!1),g=c({success:((R=o.props.flash)==null?void 0:R.success)||"",error:((J=o.props.flash)==null?void 0:J.error)||"",loading:""}),F=s=>{g.value.success=s,setTimeout(()=>{g.value.success=""},5e3)},h=s=>{g.value.error=s,setTimeout(()=>{g.value.error=""},5e3)},L=s=>{g.value.loading=s,setTimeout(()=>{g.value.loading=""},3e3)},N=(s,l)=>{let n;return(...le)=>{clearTimeout(n),n=setTimeout(()=>s(...le),l)}},B=async()=>{try{console.log("Fetching email templates for project:",i.project.id);const s=await j.get("/dashboard/email-templates",{params:{project_id:i.project.id}});console.log("Email templates response:",s.data),k.value=s.data.data||s.data,console.log("Email templates loaded:",k.value.length)}catch(s){console.error("Error fetching email templates:",s)}},S=N(async()=>{try{const s=await j.get(V("dashboard.project.donations.fetch",i.project.id),{params:{status:b.value.status,date_from:b.value.date_from,date_to:b.value.date_to,amount_min:b.value.amount_min,amount_max:b.value.amount_max}});_.value=s.data.data||s.data.map(l=>({id:l.id,donor_name:l.supporter_email??"Anonymous",amount:l.amount,currency:l.currency,date:l.billing_date?l.billing_date.format("Y-m-d"):null,status:l.status,participant_name:l.participant?(l.participant.first_name??"")+" "+(l.participant.last_name??""):"N/A",participant_id:l.participant_id})),p.value=[],r.value=!1}catch(s){console.error("Failed to fetch donations:",s),_.value=[],p.value=[],r.value=!1}},300);function Q(){r.value?p.value=_.value.map(s=>s.id):p.value=[]}const X=async()=>{if(v.value.template_id)try{const s=k.value.find(l=>l.id===v.value.template_id);s&&(v.value.subject=s.subject||"",v.value.body=s.body||"")}catch(s){console.error("Error loading template:",s)}},Z=async()=>{if(x.value.template_id)try{const s=k.value.find(l=>l.id===x.value.template_id);s&&(x.value.subject=s.subject||"",x.value.body=s.body||"")}catch(s){console.error("Error loading template:",s)}},$=async()=>{if(p.value.length===0){h("Please select at least one donation to send emails");return}v.value={template_id:"",subject:"",body:""},L("Loading email templates..."),await B(),k.value.length===0&&h("No email templates found for this project. Please create at least one template."),M.value=!0},O=()=>{M.value=!1,v.value={template_id:"",subject:"",body:""}},ee=async s=>{C.value=s,x.value={template_id:"",subject:"",body:""},L("Loading email templates..."),await B(),k.value.length===0&&h("No email templates found for this project. Please create at least one template."),z.value=!0},q=()=>{z.value=!1,C.value=null,x.value={template_id:"",subject:"",body:""}},te=async()=>{var s,l;if(!v.value.template_id){h("Please select an email template."),setTimeout(()=>{g.value.error=""},3e3);return}E.value=!0;try{const n=await j.post(V("project.donations.massEmail",i.project.id),{donation_ids:p.value,template_id:v.value.template_id,subject:v.value.subject,body:v.value.body});O(),p.value=[],r.value=!1,F(`Mass email sent successfully. ${n.data.results.success} sent, ${n.data.results.failed} failed, ${n.data.results.skipped} skipped.`),setTimeout(()=>{g.value.success=""},5e3)}catch(n){console.error("Error sending mass email:",n),h(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.error)||"Failed to send mass email."),setTimeout(()=>{g.value.error=""},5e3)}finally{E.value=!1}},oe=async()=>{var s,l;if(!x.value.template_id||!C.value){h("Please select an email template."),setTimeout(()=>{g.value.error=""},3e3);return}E.value=!0;try{const n=await j.post(V("project.donations.sendEmail",{projectId:i.project.id,donationId:C.value.id}),{template_id:x.value.template_id,subject:x.value.subject,body:x.value.body,project_id:i.project.id});q(),F("Email sent successfully."),setTimeout(()=>{g.value.success=""},3e3)}catch(n){console.error("Error sending email:",n),h(((l=(s=n.response)==null?void 0:s.data)==null?void 0:l.error)||"Failed to send email."),setTimeout(()=>{g.value.error=""},3e3)}finally{E.value=!1}},re=async()=>{if(p.value.length!==0){T.value=!0;try{const s=await j.post(V("project.donations.bulkInvoice",i.project.id),{donation_ids:p.value},{responseType:"blob"}),l=window.URL.createObjectURL(new Blob([s.data],{type:"application/pdf"})),n=document.createElement("a");n.href=l,n.setAttribute("download",`bulk_invoice_${i.project.id}_${new Date().toISOString().slice(0,10)}.pdf`),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(l),p.value=[],r.value=!1,alert("Bulk invoice generated successfully!")}catch(s){console.error("Failed to generate bulk invoice:",s),alert("Failed to generate bulk invoice. Please try again.")}finally{T.value=!1}}};K(()=>{S(),B()}),I(()=>i.project.id,s=>{s&&S()});const se=()=>{S()};I(b,(s,l)=>{JSON.stringify(s)!==JSON.stringify(l)&&S()},{deep:!0});const G={props:i,page:o,donations:_,filters:b,selectedDonations:p,selectAll:r,showEmailModal:M,showSingleEmailModal:z,selectedDonation:C,emailTemplates:k,isSending:E,emailForm:v,singleEmailForm:x,isGeneratingInvoice:T,flashMessage:g,showSuccessMessage:F,showErrorMessage:h,showLoadingMessage:L,debounce:N,fetchEmailTemplates:B,fetchDonations:S,toggleSelectAll:Q,handleTemplateChange:X,handleSingleTemplateChange:Z,openEmailModal:$,closeEmailModal:O,openSingleEmailModal:ee,closeSingleEmailModal:q,sendMassEmail:te,sendSingleEmail:oe,generateBulkInvoice:re,applyFilters:se,ref:c,onMounted:K,watch:I,computed:ne,get router(){return de},get usePage(){return Y},get Link(){return ie},get axios(){return j},get route(){return V}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}},pe={class:"bg-white shadow-md rounded-xl p-6 mb-6 border border-gray-100"},ce={class:"bg-white shadow-md rounded-xl p-6 border border-gray-100"},ge={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"},we={class:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center"},fe={class:"ml-2 text-base font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full"},ve={class:"space-x-3 flex"},xe=["disabled"],be=["disabled"],he={class:"min-w-full divide-y divide-gray-200 bg-white rounded-xl overflow-hidden border border-gray-100 shadow-sm mb-4"},ye={class:"bg-gradient-to-r from-purple-600 to-blue-600"},ke={class:"px-6 py-3.5 text-left text-xs font-medium text-white uppercase tracking-wider"},Me={class:"divide-y divide-gray-200"},je={class:"px-6 py-4 whitespace-nowrap"},_e=["value"],Ce={class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},Ee={class:"px-6 py-4 whitespace-nowrap text-gray-700"},Se={class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},Ve={class:"px-6 py-4 whitespace-nowrap text-gray-700"},Be={class:"px-6 py-4 whitespace-nowrap"},ze={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Te={class:"flex justify-end space-x-3"},Fe=["onClick"],Le=["href"],He={key:0},De={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},Ae={class:"bg-white rounded-xl shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-gray-100"},Ue=["value"],Ie={class:"flex justify-end space-x-4 pt-2"},Pe=["disabled"],Ne={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},Oe={class:"bg-white rounded-xl shadow-xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-gray-100"},qe={class:"flex justify-between items-center mb-6"},Ge={class:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center"},Re=["value"],Je={class:"flex justify-end space-x-4 pt-2"},We=["disabled"],Ye={key:2,class:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg relative mb-4 shadow-sm flex items-center"},Ke={key:3,class:"bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg relative mb-4 shadow-sm flex items-center"},Qe={key:4,class:"fixed bottom-4 right-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-3 rounded-lg shadow-md flex items-center"};function Xe(P,t,i,o,_,b){var p;return m(),u("div",null,[w(" Filters "),e("div",pe,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center mb-6"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),a(" Filters ")],-1)),e("form",{onSubmit:H(o.applyFilters,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-6"},[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})]),a(" Status ")],-1)),f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.filters.status=r),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200"},t[13]||(t[13]=[e("option",{value:""},"All",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1)]),512),[[D,o.filters.status]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),a(" Date From ")],-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.filters.date_from=r),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200"},null,512),[[y,o.filters.date_from]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),a(" Date To ")],-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.filters.date_to=r),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200"},null,512),[[y,o.filters.date_to]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),a(" Amount Min ")],-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.filters.amount_min=r),type:"number",step:"0.01",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200"},null,512),[[y,o.filters.amount_min]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),a(" Amount Max ")],-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.filters.amount_max=r),type:"number",step:"0.01",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200"},null,512),[[y,o.filters.amount_max]])]),t[19]||(t[19]=e("div",{class:"flex items-end"},[e("button",{type:"submit",class:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-colors duration-200 font-medium shadow-md flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),a(" Apply Filters ")])],-1))],32)]),w(" Donations Table "),e("div",ce,[e("div",ge,[e("h2",we,[t[21]||(t[21]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-7 w-7 mr-2 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[22]||(t[22]=a(" Donations ")),e("span",fe,"("+d(o.donations.length)+" entries)",1)]),e("div",ve,[e("button",{onClick:o.openEmailModal,disabled:o.selectedDonations.length===0,class:"px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-colors duration-200 font-medium shadow-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed"},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),a(" Mass Email ")]),8,xe),e("button",{onClick:o.generateBulkInvoice,disabled:o.selectedDonations.length===0||o.isGeneratingInvoice,class:"px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-colors duration-200 font-medium shadow-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed"},[t[24]||(t[24]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),a(" "+d(o.isGeneratingInvoice?"Generating...":"Bulk Invoice"),1)],8,be)])]),e("table",he,[e("thead",ye,[e("tr",null,[e("th",ke,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=r=>o.selectAll=r),onChange:o.toggleSelectAll,class:"rounded border-gray-300 text-purple-600 shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50"},null,544),[[W,o.selectAll]])]),t[25]||(t[25]=e("th",{class:"px-6 py-3.5 text-left text-xs font-medium text-white uppercase tracking-wider"},"Donor",-1)),t[26]||(t[26]=e("th",{class:"px-6 py-3.5 text-left text-xs font-medium text-white uppercase tracking-wider"},"Participant",-1)),t[27]||(t[27]=e("th",{class:"px-6 py-3.5 text-left text-xs font-medium text-white uppercase tracking-wider"},"Amount",-1)),t[28]||(t[28]=e("th",{class:"px-6 py-3.5 text-left text-xs font-medium text-white uppercase tracking-wider"},"Date",-1)),t[29]||(t[29]=e("th",{class:"px-6 py-3.5 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status",-1)),t[30]||(t[30]=e("th",{class:"px-6 py-3.5 text-right text-xs font-medium text-white uppercase tracking-wider"},"Actions",-1))])]),e("tbody",Me,[(m(!0),u(A,null,U(o.donations,r=>(m(),u("tr",{key:r.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",je,[f(e("input",{type:"checkbox",value:r.id,"onUpdate:modelValue":t[6]||(t[6]=M=>o.selectedDonations=M),class:"rounded border-gray-300 text-purple-600 shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50"},null,8,_e),[[W,o.selectedDonations]])]),e("td",Ce,d(r.donor_name),1),e("td",Ee,d(r.participant_name),1),e("td",Se,d(r.amount)+" "+d(r.currency),1),e("td",Ve,d(r.date),1),e("td",Be,[e("span",{class:ae([{"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":r.status==="completed","bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-800 border border-yellow-200":r.status==="pending"},"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full shadow-sm"])},d(r.status),3)]),e("td",ze,[e("div",Te,[r.donor_email?(m(),u("button",{key:0,onClick:M=>o.openSingleEmailModal(r),class:"text-purple-600 hover:text-purple-900 transition-colors duration-150 p-1.5 rounded-full hover:bg-purple-50",title:"Send Email"},[...t[31]||(t[31]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)])],8,Fe)):w("v-if",!0),r.participant_id?(m(),u("a",{key:1,href:o.route("donations.preview",{donation:r.id}),target:"_blank",class:"text-purple-600 hover:text-purple-900 transition-colors duration-150 p-1.5 rounded-full hover:bg-purple-50",title:"View Invoice"},[...t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,Le)):w("v-if",!0)])])]))),128)),o.donations.length===0?(m(),u("tr",He,t[33]||(t[33]=[e("td",{colspan:"7",class:"px-6 py-8 text-center"},[e("div",{class:"flex flex-col items-center justify-center text-gray-500"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),e("p",{class:"text-gray-500 text-lg"},"No donations found"),e("p",{class:"text-gray-400 text-sm"},"Try adjusting your filters or check back later")])],-1)]))):w("v-if",!0)])])]),w(" Mass Email Modal "),o.showEmailModal?(m(),u("div",De,[e("div",Ae,[e("div",{class:"flex justify-between items-center mb-6"},[t[35]||(t[35]=e("h2",{class:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),a(" Send Mass Email ")],-1)),e("button",{onClick:o.closeEmailModal,class:"text-gray-400 hover:text-gray-600 transition-colors duration-150"},t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:H(o.sendMassEmail,["prevent"]),class:"space-y-5"},[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5z"})]),a(" Email Template ")],-1)),f(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.emailForm.template_id=r),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200",required:"",onChange:o.handleTemplateChange},[t[36]||(t[36]=e("option",{value:""},"Select a template",-1)),(m(!0),u(A,null,U(o.emailTemplates,r=>(m(),u("option",{key:r.id,value:r.id},d(r.name),9,Ue))),128))],544),[[D,o.emailForm.template_id]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),a(" Subject ")],-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>o.emailForm.subject=r),type:"text",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200",required:""},null,512),[[y,o.emailForm.subject]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),a(" Message ")],-1)),f(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=r=>o.emailForm.body=r),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200",rows:"6",required:""},null,512),[[y,o.emailForm.body]])]),e("div",Ie,[e("button",{onClick:o.closeEmailModal,type:"button",class:"px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200 font-medium shadow-sm border border-gray-200 flex items-center"},t[40]||(t[40]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),a(" Cancel ")])),e("button",{type:"submit",disabled:o.isSending,class:"px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-colors duration-200 font-medium shadow-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed"},[t[41]||(t[41]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)),a(" "+d(o.isSending?"Sending...":"Send Email"),1)],8,Pe)])],32)])])):w("v-if",!0),w(" Single Email Modal "),o.showSingleEmailModal?(m(),u("div",Ne,[e("div",Oe,[e("div",qe,[e("h2",Ge,[t[42]||(t[42]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),a(" Email to "+d((p=o.selectedDonation)==null?void 0:p.donor_name),1)]),e("button",{onClick:o.closeSingleEmailModal,class:"text-gray-400 hover:text-gray-600 transition-colors duration-150"},t[43]||(t[43]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:H(o.sendSingleEmail,["prevent"]),class:"space-y-5"},[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5z"})]),a(" Email Template ")],-1)),f(e("select",{"onUpdate:modelValue":t[10]||(t[10]=r=>o.singleEmailForm.template_id=r),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200",required:"",onChange:o.handleSingleTemplateChange},[t[44]||(t[44]=e("option",{value:""},"Select a template",-1)),(m(!0),u(A,null,U(o.emailTemplates,r=>(m(),u("option",{key:r.id,value:r.id},d(r.name),9,Re))),128))],544),[[D,o.singleEmailForm.template_id]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),a(" Subject ")],-1)),f(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>o.singleEmailForm.subject=r),type:"text",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200",required:""},null,512),[[y,o.singleEmailForm.subject]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),a(" Message ")],-1)),f(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=r=>o.singleEmailForm.body=r),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 transition-colors duration-200",rows:"6",required:""},null,512),[[y,o.singleEmailForm.body]])]),e("div",Je,[e("button",{onClick:o.closeSingleEmailModal,type:"button",class:"px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200 font-medium shadow-sm border border-gray-200 flex items-center"},t[48]||(t[48]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),a(" Cancel ")])),e("button",{type:"submit",disabled:o.isSending,class:"px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-colors duration-200 font-medium shadow-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed"},[t[49]||(t[49]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)),a(" "+d(o.isSending?"Sending...":"Send Email"),1)],8,We)])],32)])])):w("v-if",!0),w(" Flash Messages "),o.flashMessage.success?(m(),u("div",Ye,[t[50]||(t[50]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,d(o.flashMessage.success),1)])):w("v-if",!0),o.flashMessage.error?(m(),u("div",Ke,[t[51]||(t[51]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,d(o.flashMessage.error),1)])):w("v-if",!0),o.flashMessage.loading?(m(),u("div",Qe,[t[52]||(t[52]=e("svg",{class:"animate-spin mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",null,d(o.flashMessage.loading),1)])):w("v-if",!0)])}const et=ue(me,[["render",Xe],["__scopeId","data-v-7af1d4ab"],["__file","/var/www/html/resources/js/Pages/Projects/DonationsTab.vue"]]);export{et as default};
