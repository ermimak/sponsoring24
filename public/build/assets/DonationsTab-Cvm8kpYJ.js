import{p as F,r as g,B,s as q,z as j,d as i,o as p,a as e,t as d,e as w,b as M,f as r,q as z,v as x,g as S,F as I,j as N,W as h,k as O}from"./app-BDDThPdq.js";/* empty css            */const P={class:"min-h-screen bg-gray-50"},T={class:"bg-white shadow"},W={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},L={class:"text-3xl font-bold text-gray-900"},G={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},H={class:"bg-white shadow rounded-lg p-6 mb-6"},J={class:"bg-white shadow rounded-lg p-6"},K={class:"flex justify-between items-center mb-4"},Q={class:"space-x-4"},R=["disabled"],X=["disabled"],Y={key:0,class:"min-w-full divide-y divide-gray-200"},Z={class:"bg-gray-50"},$={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ee={class:"bg-white divide-y divide-gray-200"},te={class:"px-6 py-4 whitespace-nowrap"},se=["value"],le={class:"px-6 py-4 whitespace-nowrap"},oe={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap"},ne={class:"px-6 py-4 whitespace-nowrap"},de={class:"px-6 py-4 whitespace-nowrap"},re={key:1,class:"text-center py-10 text-gray-500"},ue={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50"},ie={class:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full"},pe={class:"mb-4"},me={class:"mb-4"},ge={key:1,class:"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg"},xe={key:2,class:"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg"},ve={__name:"DonationsTab",props:{project:Object,filters:Object},setup(y){const a=y,_=F(),c=g([]),l=g({status:a.filters.status||"",date_from:a.filters.date_from||"",date_to:a.filters.date_to||"",amount_min:a.filters.amount_min||"",amount_max:a.filters.amount_max||""}),o=g([]),b=g(!1),f=g(!1),u=g({subject:"",message:""}),v=B(()=>{var n,t;return{success:((n=_.props.flash)==null?void 0:n.success)||"",error:((t=_.props.flash)==null?void 0:t.error)||""}});function m(){h.get(route("project.donations.index",a.project.id),{status:l.value.status,date_from:l.value.date_from,date_to:l.value.date_to,amount_min:l.value.amount_min,amount_max:l.value.amount_max},{preserveState:!0,onSuccess:n=>{c.value=n.props.donations||[]}})}function D(){b.value?o.value=c.value.map(n=>n.id):o.value=[]}function V(){m()}function U(){f.value=!0}function k(){f.value=!1,u.value.subject="",u.value.message=""}function C(){h.post(route("project.donations.massEmail",a.project.id),{donation_ids:o.value,subject:u.value.subject,message:u.value.message},{onSuccess:()=>{k(),o.value=[],b.value=!1,m()}})}function E(){h.post(route("project.donations.bulkInvoice",a.project.id),{donation_ids:o.value},{onSuccess:()=>{o.value=[],b.value=!1,m()}})}return q(()=>{m()}),j(()=>a.project,n=>{n&&m()}),j(l,()=>{m()},{deep:!0}),(n,t)=>(p(),i("div",P,[e("header",T,[e("div",W,[e("h1",L," Donations for "+d(y.project.name[Object.keys(y.project.name)[0]]||"Unnamed Project"),1)])]),e("main",G,[e("div",H,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Filters",-1)),e("form",{onSubmit:M(V,["prevent"]),class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),r(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.status=s),class:"w-full p-2 border border-gray-300 rounded-lg"},t[9]||(t[9]=[e("option",{value:""},"All",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"completed"},"Completed",-1)]),512),[[z,l.value.status]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date From",-1)),r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.date_from=s),type:"date",class:"w-full p-2 border border-gray-300 rounded-lg"},null,512),[[x,l.value.date_from]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date To",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.date_to=s),type:"date",class:"w-full p-2 border border-gray-300 rounded-lg"},null,512),[[x,l.value.date_to]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amount Min",-1)),r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.amount_min=s),type:"number",step:"0.01",class:"w-full p-2 border border-gray-300 rounded-lg"},null,512),[[x,l.value.amount_min]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Amount Max",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.amount_max=s),type:"number",step:"0.01",class:"w-full p-2 border border-gray-300 rounded-lg"},null,512),[[x,l.value.amount_max]])]),t[15]||(t[15]=e("div",{class:"flex items-end"},[e("button",{type:"submit",class:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700"},"Apply Filters")],-1))],32)]),e("div",J,[e("div",K,[t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Donations",-1)),e("div",Q,[e("button",{onClick:U,disabled:o.value.length===0,class:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:bg-gray-400"}," Mass Email ",8,R),e("button",{onClick:E,disabled:o.value.length===0,class:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:bg-gray-400"}," Bulk Invoice ",8,X)])]),c.value.length>0?(p(),i("table",Y,[e("thead",Z,[e("tr",null,[e("th",$,[r(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>b.value=s),onChange:D},null,544),[[S,b.value]])]),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Donor",-1)),t[19]||(t[19]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Participant",-1)),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount",-1)),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status",-1))])]),e("tbody",ee,[(p(!0),i(I,null,N(c.value,s=>(p(),i("tr",{key:s.id},[e("td",te,[r(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[6]||(t[6]=A=>o.value=A)},null,8,se),[[S,o.value]])]),e("td",le,d(s.donor_name),1),e("td",oe,d(s.participant_name),1),e("td",ae,d(s.amount)+" "+d(s.currency),1),e("td",ne,d(s.date),1),e("td",de,[e("span",{class:O([{"bg-green-100 text-green-800":s.status==="completed","bg-yellow-100 text-yellow-800":s.status==="pending"},"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},d(s.status),3)])]))),128))])])):(p(),i("div",re," No donations found ðŸ˜Š "))]),f.value?(p(),i("div",ue,[e("div",ie,[t[26]||(t[26]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-4"},"Send Mass Email",-1)),e("form",{onSubmit:M(C,["prevent"])},[e("div",pe,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Subject",-1)),r(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>u.value.subject=s),type:"text",class:"w-full p-2 border border-gray-300 rounded-lg",required:""},null,512),[[x,u.value.subject]])]),e("div",me,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Message",-1)),r(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>u.value.message=s),class:"w-full p-2 border border-gray-300 rounded-lg",rows:"4",required:""},null,512),[[x,u.value.message]])]),e("div",{class:"flex justify-end space-x-4"},[e("button",{onClick:k,type:"button",class:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400"},"Cancel"),t[25]||(t[25]=e("button",{type:"submit",class:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700"},"Send",-1))])],32)])])):w("",!0),v.value.success?(p(),i("div",ge,d(v.value.success),1)):w("",!0),v.value.error?(p(),i("div",xe,d(v.value.error),1)):w("",!0)])]))}};export{ve as default};
