import{p as T,r as u,c as I,o as d,w as c,a as e,d as p,e as y,t as o,i as v,u as g,S as h,F as A,j as H,h as b,W as w}from"./app-BDDThPdq.js";import{D as W}from"./DashboardLayout-DX3pOCJ2.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./SidebarLink-BeQ8zajy.js";const q={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"mb-8"},J={class:"text-3xl font-bold text-gray-900"},K={class:"flex justify-between items-center mb-4"},M={class:"flex gap-2"},O={class:"bg-white shadow rounded-lg overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"text-xs text-gray-500"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"px-6 py-4 whitespace-nowrap"},ae={class:"font-semibold"},oe={class:"text-xs text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},le=["onClick"],ie=["onClick"],ne={key:0,class:"p-4 text-center text-gray-500"},de={key:1,class:"p-4 text-center text-red-500"},ue={key:2,class:"p-4 text-center text-gray-500"},ce={key:0,class:"mt-4 flex justify-between items-center"},pe={class:"text-sm text-gray-500"},fe={class:"flex gap-2"},xe=["disabled"],ve=["disabled"],ge={__name:"Index",setup(he){var j,P,S,F;const{props:m}=T(),n=u(((j=m.projects)==null?void 0:j.data)||[]),l=u(((P=m.projects)==null?void 0:P.current_page)||1),f=u(((S=m.projects)==null?void 0:S.last_page)||1),x=u(((F=m.projects)==null?void 0:F.total)||0),r=u(!1),i=u(null),$=s=>s?new Date(s).toLocaleDateString():"",N=s=>s?new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",E=s=>{confirm("Are you sure you want to delete this project?")&&w.delete($route("dashboard.projects.destroy",s),{onStart:()=>{r.value=!0,i.value=null},onSuccess:()=>{n.value=n.value.filter(t=>t.id!==s),x.value--,r.value=!1},onError:t=>{i.value=t.message||"Failed to delete project.",r.value=!1}})},L=s=>{w.post("/dashboard/projects/duplicate/"+s.id,{},{onStart:()=>{r.value=!0,i.value=null},onSuccess:t=>{n.value.push(t.props.projects.data[n.value.length]),x.value++,r.value=!1},onError:t=>{i.value=t.message||"Failed to duplicate project.",r.value=!1}})},V=()=>{l.value>1&&(l.value--,k())},B=()=>{l.value<f.value&&(l.value++,k())},k=()=>{w.get($route("dashboard.projects.index"),{page:l.value},{preserveState:!0,preserveScroll:!0,onStart:()=>{r.value=!0,i.value=null},onSuccess:s=>{n.value=s.props.projects.data,l.value=s.props.projects.current_page,f.value=s.props.projects.last_page,x.value=s.props.projects.total,r.value=!1},onError:s=>{i.value=s.message||"Failed to load projects.",r.value=!1}})};return(s,t)=>(d(),I(W,null,{default:c(()=>[e("div",q,[e("div",z,[e("div",G,[e("h1",J,"Projects ("+o(x.value)+" entries)",1)]),e("div",K,[t[2]||(t[2]=e("div",null,null,-1)),e("div",M,[t[1]||(t[1]=e("button",{class:"rounded-full bg-gray-100 p-2 hover:bg-gray-200"},[e("i",{class:"fas fa-filter text-gray-500"})],-1)),v(g(h),{href:s.$route("dashboard.projects.create"),class:"rounded-full bg-yellow-400 hover:bg-yellow-500 text-white text-2xl flex items-center justify-center w-10 h-10"},{default:c(()=>t[0]||(t[0]=[e("i",{class:"fas fa-plus"},null,-1)])),_:1},8,["href"])])]),e("div",O,[e("table",Q,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Project"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Start"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Participant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Donate"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sales Volume"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",R,[(d(!0),p(A,null,H(n.value,a=>(d(),p("tr",{key:a.id},[e("td",X,[v(g(h),{href:s.$route("dashboard.projects.edit",a.id),class:"text-purple-700 font-medium hover:underline"},{default:c(()=>{var _,C,D;return[b(o(((_=a.name)==null?void 0:_.de)||((C=a.name)==null?void 0:C.fr)||((D=a.name)==null?void 0:D.en)||"Untitled"),1)]}),_:2},1032,["href"])]),e("td",Y,[e("div",null,o($(a.start)),1),e("div",Z,o(N(a.start)),1)]),e("td",ee,[v(g(h),{href:s.$route("dashboard.projects.edit",{id:a.id,tab:"Participant"}),class:"text-purple-600 hover:underline"},{default:c(()=>[b(o(a.participants_count||0)+" participants ",1)]),_:2},1032,["href"])]),e("td",te,[v(g(h),{href:s.$route("dashboard.projects.edit",{id:a.id,tab:"Donations"}),class:"text-purple-600 hover:underline"},{default:c(()=>[b(o(a.donations_count||0)+" participant donations ",1)]),_:2},1032,["href"])]),e("td",se,[e("div",null,[t[3]||(t[3]=b("Total: ")),e("span",ae,"CHF "+o(Number.isFinite(a.donations_sum_amount)?a.donations_sum_amount.toFixed(2):"0.00"),1)]),e("div",oe,"Paid: CHF "+o(Number.isFinite(a.donations_sum_amount)?a.donations_sum_amount.toFixed(2):"0.00"),1)]),e("td",re,[e("button",{onClick:_=>L(a),class:"text-gray-600 hover:text-gray-800 mr-2"},t[4]||(t[4]=[e("i",{class:"fas fa-copy"},"duplicate",-1)]),8,le),v(g(h),{href:s.$route("dashboard.projects.edit",a.id),class:"text-indigo-600 hover:text-indigo-900 mr-2"},{default:c(()=>t[5]||(t[5]=[e("i",{class:"fas fa-edit"},"edit",-1)])),_:2},1032,["href"]),e("button",{onClick:_=>E(a.id),class:"text-red-600 hover:text-red-900"},t[6]||(t[6]=[e("i",{class:"fas fa-trash"},"delete",-1)]),8,ie)])]))),128))])]),r.value?(d(),p("div",ne,"Loading...")):y("",!0),i.value?(d(),p("div",de,o(i.value),1)):y("",!0),!r.value&&n.value.length===0?(d(),p("div",ue,"No entries found ðŸ˜•")):y("",!0)]),f.value>1?(d(),p("div",ce,[e("span",pe,"Page "+o(l.value)+" of "+o(f.value)+" | "+o(x.value)+" entries total",1),e("div",fe,[e("button",{onClick:V,disabled:l.value===1,class:"rounded-full bg-gray-200 p-2 hover:bg-gray-300 disabled:opacity-50"},t[8]||(t[8]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,xe),e("button",{onClick:B,disabled:l.value===f.value,class:"rounded-full bg-gray-200 p-2 hover:bg-gray-300 disabled:opacity-50"},t[9]||(t[9]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,ve)])])):y("",!0)])])]),_:1}))}},ke=U(ge,[["__scopeId","data-v-26ed852b"]]);export{ke as default};
