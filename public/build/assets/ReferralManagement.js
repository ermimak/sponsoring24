import{C as y,D as m,f,o as i,w as c,g as t,t as d,l as n,F as r,m as l,q as _,n as v,y as p,k as x,i as b,x as w}from"./vendor.js";import{_ as k}from"./AdminLayout.js";import{_ as C}from"./Pagination.js";import{r as R}from"./app.js";import{_ as S}from"./_plugin-vue_export-helper.js";import"./NotificationDropdown.js";/* empty css    */const A=y({components:{AdminLayout:k,Pagination:C},props:{referrals:Object,stats:Object,topReferrers:Array,monthlyTrends:Array},computed:{maxTrendCount(){return!this.monthlyTrends||this.monthlyTrends.length===0?1:Math.max(...this.monthlyTrends.map(s=>s.count))}},methods:{formatDate(s){return new Date(s).toLocaleDateString()},formatMonth(s){const[e,a]=s.split("-");return`${a}/${e.slice(2)}`},getStatusClass(s){return{pending:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",credited:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",rejected:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}[s]||""},updateStatus(s,e){w({status:e}).post(R("admin.referrals.update-status",{bonusCredit:s}),{preserveScroll:!0})}}}),T={class:"font-semibold text-xl text-gray-800 leading-tight"},$={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},N={class:"text-3xl font-bold text-gray-800"},U={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},j={class:"text-3xl font-bold text-green-600"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},P={class:"text-3xl font-bold text-yellow-500"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},H={class:"text-3xl font-bold text-blue-600"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},E={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},q={class:"px-6 py-4 whitespace-nowrap"},G={class:"flex items-center"},I={class:"text-sm font-medium text-gray-900"},J={class:"text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap"},Q={class:"text-sm text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"text-sm text-gray-900"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},Z={class:"h-64"},tt={class:"flex h-full items-end"},et={class:"text-xs text-center mt-1"},st={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ot={class:"p-6 bg-white border-b border-gray-200"},dt={class:"min-w-full divide-y divide-gray-200"},it={class:"bg-white divide-y divide-gray-200"},nt={class:"px-6 py-4 whitespace-nowrap"},at={class:"flex items-center"},rt={class:"text-sm font-medium text-gray-900"},lt={class:"text-sm text-gray-500"},mt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"flex items-center"},pt={class:"text-sm font-medium text-gray-900"},xt={class:"text-sm text-gray-500"},ut={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},_t={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},vt=["onSubmit"],bt=["onSubmit"],wt={class:"mt-4"};function kt(s,e,a,Ct,Rt,St){const u=m("Pagination"),g=m("AdminLayout");return i(),f(g,null,{header:c(()=>[t("h2",T,d(s.$t("Referral Management")),1)]),default:c(()=>[t("div",$,[t("div",D,[t("div",F,[t("div",M,[e[0]||(e[0]=t("div",{class:"text-gray-500 text-sm font-medium"},"Total Referrals",-1)),t("div",N,d(s.stats.totalReferrals),1)]),t("div",U,[e[1]||(e[1]=t("div",{class:"text-gray-500 text-sm font-medium"},"Credited Referrals",-1)),t("div",j,d(s.stats.totalCredited),1)]),t("div",L,[e[2]||(e[2]=t("div",{class:"text-gray-500 text-sm font-medium"},"Pending Referrals",-1)),t("div",P,d(s.stats.totalPending),1)]),t("div",B,[e[3]||(e[3]=t("div",{class:"text-gray-500 text-sm font-medium"},"Total Amount Credited",-1)),t("div",H,"CHF "+d(s.stats.totalAmount?Number(s.stats.totalAmount).toFixed(2):"0.00"),1)])]),t("div",V,[t("div",z,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold mb-4"},"Top Referrers",-1)),t("table",E,[e[4]||(e[4]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Referrals"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Earned")])],-1)),t("tbody",O,[(i(!0),n(r,null,l(s.topReferrers,o=>(i(),n("tr",{key:o.id},[t("td",q,[t("div",G,[t("div",null,[t("div",I,d(o.name),1),t("div",J,d(o.email),1)])])]),t("td",K,[t("div",Q,d(o.referral_count),1)]),t("td",W,[t("div",X,"CHF "+d(o.total_earned),1)])]))),128))])])]),t("div",Y,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold mb-4"},"Monthly Referral Trends",-1)),t("div",Z,[t("div",tt,[(i(!0),n(r,null,l(s.monthlyTrends,o=>(i(),n("div",{key:o.month,class:"flex-1 mx-1"},[t("div",{class:"bg-blue-500 rounded-t",style:_({height:o.count/s.maxTrendCount*100+"%"})},null,4),t("div",et,d(s.formatMonth(o.month)),1)]))),128))])])])]),t("div",st,[t("div",ot,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-4"},"All Referrals",-1)),t("table",dt,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Referrer"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Referred User"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",it,[(i(!0),n(r,null,l(s.referrals.data,o=>(i(),n("tr",{key:o.id},[t("td",nt,[t("div",at,[t("div",null,[t("div",rt,d(o.user.name),1),t("div",lt,d(o.user.email),1)])])]),t("td",mt,[t("div",ct,[t("div",null,[t("div",pt,d(o.referredUser?o.referredUser.name:"N/A"),1),t("div",xt,d(o.referredUser?o.referredUser.email:"N/A"),1)])])]),t("td",ut,[t("div",gt,d(s.formatDate(o.created_at)),1)]),t("td",ht,[t("div",yt,"CHF "+d(o.amount?Number(o.amount).toFixed(2):"0.00"),1)]),t("td",ft,[t("span",{class:v(s.getStatusClass(o.status))},d(o.status),3)]),t("td",_t,[o.status==="pending"?(i(),n("form",{key:0,onSubmit:x(h=>s.updateStatus(o.id,"credited"),["prevent"])},e[7]||(e[7]=[t("button",{type:"submit",class:"text-green-600 hover:text-green-900 mr-2"},"Credit",-1)]),40,vt)):p("",!0),o.status==="pending"?(i(),n("form",{key:1,onSubmit:x(h=>s.updateStatus(o.id,"rejected"),["prevent"])},e[8]||(e[8]=[t("button",{type:"submit",class:"text-red-600 hover:text-red-900"},"Reject",-1)]),40,bt)):p("",!0)])]))),128))])]),t("div",wt,[b(u,{links:s.referrals.links},null,8,["links"])])])])])])]),_:1})}const Ut=S(A,[["render",kt]]);export{Ut as default};
