import{g as u,J as U,I,l as a,o as n,f as e,y as g,j as w,t as i,F as q,m as L,k as O,p as r,G as D,Q as R,v,z as M,a as k}from"./vendor.js";import{_ as W}from"./_plugin-vue_export-helper.js";const G={class:"flex justify-between items-center mb-6"},J={class:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600"},K={class:"text-gray-500 text-lg font-normal"},Q={class:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6 overflow-hidden"},X={class:"min-w-full divide-y divide-gray-100"},Y={class:"bg-gradient-to-r from-purple-50 to-blue-50"},Z={class:"flex items-center"},ee={key:0,class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={class:"flex items-center"},oe={key:0,class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={class:"flex items-center"},se={key:0,class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={class:"divide-y divide-gray-100"},ae={class:"px-6 py-4 text-sm text-gray-800"},ne={class:"px-6 py-4 text-sm text-gray-800"},ie={class:"px-6 py-4 text-sm text-gray-800"},de={class:"px-6 py-4"},ue={class:"flex space-x-3"},pe=["onClick"],me=["onClick"],ce={key:0},ve={class:"flex justify-between items-center mb-4"},be={class:"text-sm text-gray-600"},ge={class:"flex space-x-2"},xe=["disabled"],fe=["disabled"],ye={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},we={class:"bg-white rounded-xl shadow-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-gray-100"},he={class:"flex justify-between items-center mb-5"},ke={class:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600"},_e={class:"relative"},Ce={class:"mt-3 space-y-2"},je={class:"flex items-center"},Me={class:"flex items-center"},Se={class:"mt-3"},Ve={class:"flex items-center"},Be={class:"flex gap-3 justify-end pt-2"},Te=["disabled"],Ee={key:0},Ue={key:1,class:"flex items-center"},Pe={key:0,class:"mt-4 p-3 bg-red-50 text-red-700 rounded-lg flex items-start"},S=5,Ne={__name:"EmailsTab",props:{projectId:String},setup(P){const V=P,p=u([]),x=u(!1),f=u(!1),l=u({id:null,type:"",name:"",subject:"",body:"",footer:"",notes:"",show_logo:!1,show_header_image:!1,show_placeholders:!1,regarding:"",reply_to:"",sender_name:""}),m=u(!1),d=u(""),c=u(1),y=u("name"),h=u("asc");async function _(){var s,t;m.value=!0,d.value="";try{const{data:o}=await k.get("/dashboard/email-templates",{params:{project_id:V.projectId}});o.error?(d.value=o.error,p.value=[]):p.value=o.data||o}catch(o){d.value="Failed to load email templates: "+(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.error)||o.message),p.value=[]}finally{m.value=!1}}function N(){f.value=!1,l.value={id:null,type:"",name:"",subject:"",body:"",footer:"",notes:"",show_logo:!1,show_header_image:!1,show_placeholders:!1,regarding:"",reply_to:"",sender_name:""},x.value=!0}function $(s){f.value=!0,l.value={...s},x.value=!0}function B(){x.value=!1}async function z(){var s,t;m.value=!0,d.value="";try{const o={...l.value,project_id:V.projectId};f.value?await k.put(`/dashboard/email-templates/${l.value.id}`,o):await k.post("/dashboard/email-templates",o),x.value=!1,_()}catch(o){d.value="Failed to save email template: "+(((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.error)||o.message)}finally{m.value=!1}}async function F(s){var t,o;m.value=!0,d.value="";try{await k.delete(`/dashboard/email-templates/${s}`),_()}catch(b){d.value="Failed to delete email template: "+(((o=(t=b.response)==null?void 0:t.data)==null?void 0:o.error)||b.message)}finally{m.value=!1}}function C(s){y.value===s?h.value=h.value==="asc"?"desc":"asc":(y.value=s,h.value="asc"),p.value.sort((t,o)=>{let b=t[s],E=o[s];return h.value==="asc"?b.localeCompare(E):E.localeCompare(b)})}const T=U(()=>{const s=(c.value-1)*S,t=s+S;return p.value.slice(s,t)}),j=U(()=>Math.ceil(p.value.length/S));function A(){c.value>1&&c.value--}function H(){c.value<j.value&&c.value++}return I(_),(s,t)=>(n(),a("div",null,[e("div",G,[e("h2",J,[t[15]||(t[15]=w("Email Templates ")),e("span",K,"("+i(p.value.length)+" entries)",1)]),e("button",{onClick:N,class:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg shadow-sm flex items-center transition-all duration-200"},t[16]||(t[16]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" Add Email Template ")]))]),e("div",Q,[e("table",X,[e("thead",null,[e("tr",Y,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:text-purple-600 transition-colors duration-200",onClick:t[0]||(t[0]=o=>C("name"))},[e("div",Z,[t[18]||(t[18]=e("span",null,"Name",-1)),y.value==="name"?(n(),a("svg",ee,t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"{{ sortOrder === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7' }}"},null,-1)]))):g("",!0)])]),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:text-purple-600 transition-colors duration-200",onClick:t[1]||(t[1]=o=>C("type"))},[e("div",te,[t[20]||(t[20]=e("span",null,"Type",-1)),y.value==="type"?(n(),a("svg",oe,t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"{{ sortOrder === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7' }}"},null,-1)]))):g("",!0)])]),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:text-purple-600 transition-colors duration-200",onClick:t[2]||(t[2]=o=>C("subject"))},[e("div",le,[t[22]||(t[22]=e("span",null,"Subject",-1)),y.value==="subject"?(n(),a("svg",se,t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"{{ sortOrder === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7' }}"},null,-1)]))):g("",!0)])]),t[23]||(t[23]=e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",re,[(n(!0),a(q,null,L(T.value,o=>(n(),a("tr",{key:o.id,class:"hover:bg-blue-50 transition-colors duration-150"},[e("td",ae,i(o.name),1),e("td",ne,i(o.type),1),e("td",ie,i(o.subject),1),e("td",de,[e("div",ue,[e("button",{onClick:b=>$(o),class:"text-blue-600 hover:text-blue-800 flex items-center transition-colors duration-200"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),e("span",null,"Edit",-1)]),8,pe),e("button",{onClick:b=>F(o.id),class:"text-red-600 hover:text-red-800 flex items-center transition-colors duration-200"},t[25]||(t[25]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",null,"Delete",-1)]),8,me)])])]))),128)),T.value.length===0?(n(),a("tr",ce,t[26]||(t[26]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500 italic"},"No email templates found",-1)]))):g("",!0)])])]),e("div",ve,[e("div",be,"Page "+i(c.value)+" of "+i(j.value)+" ("+i(p.value.length)+" total)",1),e("div",ge,[e("button",{onClick:A,disabled:c.value===1,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 shadow-sm disabled:opacity-40 disabled:cursor-not-allowed"},t[27]||(t[27]=[e("span",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})]),w(" Previous ")],-1)]),8,xe),e("button",{onClick:H,disabled:c.value===j.value,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 shadow-sm disabled:opacity-40 disabled:cursor-not-allowed"},t[28]||(t[28]=[e("span",{class:"flex items-center"},[w(" Next "),e("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)]),8,fe)])]),x.value?(n(),a("div",ye,[e("div",we,[e("div",he,[e("h2",ke,i(f.value?"Edit":"Create")+" Email Template ",1),e("button",{onClick:B,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200",type:"button"},t[29]||(t[29]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:O(z,["prevent"]),class:"space-y-5"},[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("div",_e,[r(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.type=o),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 appearance-none pr-10",required:""},t[30]||(t[30]=[R('<option value="" disabled data-v-90cc41d5>Select type</option><option value="participant_invitation" data-v-90cc41d5>Participant invitation</option><option value="participant_differential_calculation" data-v-90cc41d5>Participant differential calculation</option><option value="supporter_invitation" data-v-90cc41d5>Supporter invitation</option><option value="supporter_bill" data-v-90cc41d5>Supporter bill</option><option value="supporter_payment_reminder" data-v-90cc41d5>Supporter payment reminder</option>',6)]),512),[[D,l.value.type]]),t[31]||(t[31]=e("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.name=o),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",required:"",placeholder:"e.g., Participant Welcome"},null,512),[[v,l.value.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.subject=o),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",required:"",placeholder:"e.g., Welcome to our campaign"},null,512),[[v,l.value.subject]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email message",-1)),r(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.body=o),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"5",required:"",placeholder:"Enter email body..."},null,512),[[v,l.value.body]]),e("div",Ce,[e("div",je,[r(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.show_logo=o),type:"checkbox",id:"show_logo",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[M,l.value.show_logo]]),t[35]||(t[35]=e("label",{for:"show_logo",class:"ml-2 text-sm text-gray-700"},"Show logo",-1))]),e("div",Me,[r(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.show_header_image=o),type:"checkbox",id:"show_header_image",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[M,l.value.show_header_image]]),t[36]||(t[36]=e("label",{for:"show_header_image",class:"ml-2 text-sm text-gray-700"},"Show project header image",-1))])])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email Footer",-1)),r(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.footer=o),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter footer text..."},null,512),[[v,l.value.footer]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email Notes",-1)),r(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.notes=o),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter notes..."},null,512),[[v,l.value.notes]]),e("div",Se,[e("div",Ve,[r(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.value.show_placeholders=o),type:"checkbox",id:"show_placeholders",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[M,l.value.show_placeholders]]),t[39]||(t[39]=e("label",{for:"show_placeholders",class:"ml-2 text-sm text-gray-700"},"Show available placeholders",-1))])])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Regarding",-1)),r(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>l.value.regarding=o),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Summer Campaign"},null,512),[[v,l.value.regarding]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reply To",-1)),r(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>l.value.reply_to=o),type:"email",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., contact@sponsoring24.com"},null,512),[[v,l.value.reply_to]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sender Name",-1)),r(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>l.value.sender_name=o),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Sponsoring24 Team"},null,512),[[v,l.value.sender_name]])]),e("div",Be,[e("button",{type:"button",onClick:B,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 shadow-sm"}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg text-white hover:from-purple-700 hover:to-blue-700 transition-colors duration-200 shadow-sm",disabled:m.value},[m.value?(n(),a("span",Ue,t[44]||(t[44]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),w(" Saving... ")]))):(n(),a("span",Ee,i(f.value?"Update":"Create"),1))],8,Te)])],32),d.value?(n(),a("div",Pe,[t[45]||(t[45]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,i(d.value),1)])):g("",!0)])])):g("",!0)]))}},Fe=W(Ne,[["__scopeId","data-v-90cc41d5"]]);export{Fe as default};
