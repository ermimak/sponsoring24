import{k as i,o as d,f as e,y as v,i as h,t as u,F as L,l as D,j as R,q as n,G as W,P as G,v as f,z as P,m,p as T,I as U,a as k}from"./vendor.js";import{_ as J}from"./_plugin-vue_export-helper.js";const j=5,Q={__name:"EmailsTab",props:{projectId:String},setup(S,{expose:t}){t();const _=S,o=m([]),g=m(!1),x=m(!1),l=m({id:null,type:"",name:"",subject:"",body:"",footer:"",notes:"",show_logo:!1,show_header_image:!1,show_placeholders:!1,regarding:"",reply_to:"",sender_name:""}),p=m(!1),c=m(""),b=m(1),M=m("name"),y=m("asc");async function C(){var s,a;p.value=!0,c.value="";try{const{data:r}=await k.get("/dashboard/email-templates",{params:{project_id:_.projectId}});r.error?(c.value=r.error,o.value=[]):o.value=r.data||r}catch(r){c.value="Failed to load email templates: "+(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.error)||r.message),o.value=[]}finally{p.value=!1}}function N(){x.value=!1,l.value={id:null,type:"",name:"",subject:"",body:"",footer:"",notes:"",show_logo:!1,show_header_image:!1,show_placeholders:!1,regarding:"",reply_to:"",sender_name:""},g.value=!0}function z(s){x.value=!0,l.value={...s},g.value=!0}function F(){g.value=!1}async function q(){var s,a;p.value=!0,c.value="";try{const r={...l.value,project_id:_.projectId};x.value?await k.put(`/dashboard/email-templates/${l.value.id}`,r):await k.post("/dashboard/email-templates",r),g.value=!1,C()}catch(r){c.value="Failed to save email template: "+(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.error)||r.message)}finally{p.value=!1}}async function A(s){var a,r;p.value=!0,c.value="";try{await k.delete(`/dashboard/email-templates/${s}`),C()}catch(w){c.value="Failed to delete email template: "+(((r=(a=w.response)==null?void 0:a.data)==null?void 0:r.error)||w.message)}finally{p.value=!1}}function H(s){M.value===s?y.value=y.value==="asc"?"desc":"asc":(M.value=s,y.value="asc"),o.value.sort((a,r)=>{let w=a[s],E=r[s];return y.value==="asc"?w.localeCompare(E):E.localeCompare(w)})}const I=T(()=>{const s=(b.value-1)*j,a=s+j;return o.value.slice(s,a)}),V=T(()=>Math.ceil(o.value.length/j));function O(){b.value>1&&b.value--}function K(){b.value<V.value&&b.value++}U(C);const B={props:_,templates:o,showModal:g,editing:x,form:l,loading:p,error:c,currentPage:b,itemsPerPage:j,sortKey:M,sortOrder:y,fetchTemplates:C,openCreate:N,editTemplate:z,closeModal:F,saveTemplate:q,deleteTemplate:A,sort:H,paginatedTemplates:I,totalPages:V,prevPage:O,nextPage:K,ref:m,onMounted:U,computed:T,get axios(){return k}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}},X={class:"flex justify-between items-center mb-6"},Y={class:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600"},Z={class:"text-gray-500 text-lg font-normal"},$={class:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6 overflow-hidden"},ee={class:"min-w-full divide-y divide-gray-100"},te={class:"bg-gradient-to-r from-purple-50 to-blue-50"},oe={class:"flex items-center"},le={key:0,class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={class:"flex items-center"},se={key:0,class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ae={class:"flex items-center"},ne={key:0,class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie={class:"divide-y divide-gray-100"},de={class:"px-6 py-4 text-sm text-gray-800"},ue={class:"px-6 py-4 text-sm text-gray-800"},me={class:"px-6 py-4 text-sm text-gray-800"},pe={class:"px-6 py-4"},ce={class:"flex space-x-3"},fe=["onClick"],ge=["onClick"],be={key:0},ve={class:"flex justify-between items-center mb-4"},xe={class:"text-sm text-gray-600"},ye={class:"flex space-x-2"},we=["disabled"],he=["disabled"],ke={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm"},_e={class:"bg-white rounded-xl shadow-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto border border-gray-100"},Ce={class:"flex justify-between items-center mb-5"},je={class:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600"},Me={class:"relative"},Pe={class:"mt-3 space-y-2"},Te={class:"flex items-center"},Se={class:"flex items-center"},Ve={class:"mt-3"},Be={class:"flex items-center"},Ee={class:"flex gap-3 justify-end pt-2"},Ue=["disabled"],Ne={key:0},ze={key:1,class:"flex items-center"},Fe={key:0,class:"mt-4 p-3 bg-red-50 text-red-700 rounded-lg flex items-start"};function qe(S,t,_,o,g,x){return d(),i("div",null,[e("div",X,[e("h2",Y,[t[15]||(t[15]=h("Email Templates ")),e("span",Z,"("+u(o.templates.length)+" entries)",1)]),e("button",{onClick:o.openCreate,class:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg shadow-sm flex items-center transition-all duration-200"},t[16]||(t[16]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),h(" Add Email Template ")]))]),e("div",$,[e("table",ee,[e("thead",null,[e("tr",te,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:text-purple-600 transition-colors duration-200",onClick:t[0]||(t[0]=l=>o.sort("name"))},[e("div",oe,[t[18]||(t[18]=e("span",null,"Name",-1)),o.sortKey==="name"?(d(),i("svg",le,t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"{{ sortOrder === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7' }}"},null,-1)]))):v("v-if",!0)])]),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:text-purple-600 transition-colors duration-200",onClick:t[1]||(t[1]=l=>o.sort("type"))},[e("div",re,[t[20]||(t[20]=e("span",null,"Type",-1)),o.sortKey==="type"?(d(),i("svg",se,t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"{{ sortOrder === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7' }}"},null,-1)]))):v("v-if",!0)])]),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider cursor-pointer hover:text-purple-600 transition-colors duration-200",onClick:t[2]||(t[2]=l=>o.sort("subject"))},[e("div",ae,[t[22]||(t[22]=e("span",null,"Subject",-1)),o.sortKey==="subject"?(d(),i("svg",ne,t[21]||(t[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"{{ sortOrder === 'asc' ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7' }}"},null,-1)]))):v("v-if",!0)])]),t[23]||(t[23]=e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",ie,[(d(!0),i(L,null,D(o.paginatedTemplates,l=>(d(),i("tr",{key:l.id,class:"hover:bg-blue-50 transition-colors duration-150"},[e("td",de,u(l.name),1),e("td",ue,u(l.type),1),e("td",me,u(l.subject),1),e("td",pe,[e("div",ce,[e("button",{onClick:p=>o.editTemplate(l),class:"text-blue-600 hover:text-blue-800 flex items-center transition-colors duration-200"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),e("span",null,"Edit",-1)])],8,fe),e("button",{onClick:p=>o.deleteTemplate(l.id),class:"text-red-600 hover:text-red-800 flex items-center transition-colors duration-200"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",null,"Delete",-1)])],8,ge)])])]))),128)),o.paginatedTemplates.length===0?(d(),i("tr",be,t[26]||(t[26]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500 italic"},"No email templates found",-1)]))):v("v-if",!0)])])]),e("div",ve,[e("div",xe,"Page "+u(o.currentPage)+" of "+u(o.totalPages)+" ("+u(o.templates.length)+" total)",1),e("div",ye,[e("button",{onClick:o.prevPage,disabled:o.currentPage===1,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 shadow-sm disabled:opacity-40 disabled:cursor-not-allowed"},t[27]||(t[27]=[e("span",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})]),h(" Previous ")],-1)]),8,we),e("button",{onClick:o.nextPage,disabled:o.currentPage===o.totalPages,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 shadow-sm disabled:opacity-40 disabled:cursor-not-allowed"},t[28]||(t[28]=[e("span",{class:"flex items-center"},[h(" Next "),e("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)]),8,he)])]),o.showModal?(d(),i("div",ke,[e("div",_e,[e("div",Ce,[e("h2",je,u(o.editing?"Edit":"Create")+" Email Template ",1),e("button",{onClick:o.closeModal,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200",type:"button"},t[29]||(t[29]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:R(o.saveTemplate,["prevent"]),class:"space-y-5"},[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("div",Me,[n(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.form.type=l),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 appearance-none pr-10",required:""},t[30]||(t[30]=[G('<option value="" disabled data-v-49d9c5f1>Select type</option><option value="participant_invitation" data-v-49d9c5f1>Participant invitation</option><option value="participant_differential_calculation" data-v-49d9c5f1>Participant differential calculation</option><option value="supporter_invitation" data-v-49d9c5f1>Supporter invitation</option><option value="supporter_bill" data-v-49d9c5f1>Supporter bill</option><option value="supporter_payment_reminder" data-v-49d9c5f1>Supporter payment reminder</option>',6)]),512),[[W,o.form.type]]),t[31]||(t[31]=e("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.form.name=l),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",required:"",placeholder:"e.g., Participant Welcome"},null,512),[[f,o.form.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.form.subject=l),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",required:"",placeholder:"e.g., Welcome to our campaign"},null,512),[[f,o.form.subject]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email message",-1)),n(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.form.body=l),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"5",required:"",placeholder:"Enter email body..."},null,512),[[f,o.form.body]]),e("div",Pe,[e("div",Te,[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o.form.show_logo=l),type:"checkbox",id:"show_logo",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[P,o.form.show_logo]]),t[35]||(t[35]=e("label",{for:"show_logo",class:"ml-2 text-sm text-gray-700"},"Show logo",-1))]),e("div",Se,[n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.form.show_header_image=l),type:"checkbox",id:"show_header_image",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[P,o.form.show_header_image]]),t[36]||(t[36]=e("label",{for:"show_header_image",class:"ml-2 text-sm text-gray-700"},"Show project header image",-1))])])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email Footer",-1)),n(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=l=>o.form.footer=l),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter footer text..."},null,512),[[f,o.form.footer]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email Notes",-1)),n(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=l=>o.form.notes=l),class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Enter notes..."},null,512),[[f,o.form.notes]]),e("div",Ve,[e("div",Be,[n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>o.form.show_placeholders=l),type:"checkbox",id:"show_placeholders",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[P,o.form.show_placeholders]]),t[39]||(t[39]=e("label",{for:"show_placeholders",class:"ml-2 text-sm text-gray-700"},"Show available placeholders",-1))])])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Regarding",-1)),n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>o.form.regarding=l),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Summer Campaign"},null,512),[[f,o.form.regarding]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reply To",-1)),n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>o.form.reply_to=l),type:"email",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., contact@sponsoring24.com"},null,512),[[f,o.form.reply_to]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sender Name",-1)),n(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>o.form.sender_name=l),type:"text",class:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Sponsoring24 Team"},null,512),[[f,o.form.sender_name]])]),e("div",Ee,[e("button",{type:"button",onClick:o.closeModal,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 shadow-sm"}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg text-white hover:from-purple-700 hover:to-blue-700 transition-colors duration-200 shadow-sm",disabled:o.loading},[o.loading?(d(),i("span",ze,t[44]||(t[44]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Saving... ")]))):(d(),i("span",Ne,u(o.editing?"Update":"Create"),1))],8,Ue)])],32),o.error?(d(),i("div",Fe,[t[45]||(t[45]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,u(o.error),1)])):v("v-if",!0)])])):v("v-if",!0)])}const Ie=J(Q,[["render",qe],["__scopeId","data-v-49d9c5f1"],["__file","/var/www/html/resources/js/Pages/Projects/EmailsTab.vue"]]);export{Ie as default};
