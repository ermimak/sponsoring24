import{r as u,s as $,d as a,o as i,a as e,e as V,b as h,f as p,v as c,F as x,j as f,t as m,y as d,g as M}from"./app-BDDThPdq.js";/* empty css            */const P={class:"mb-4"},U={class:"min-w-full bg-white border"},S={class:"border px-4 py-2"},A={class:"border px-4 py-2"},B={class:"border px-4 py-2"},D={class:"border px-4 py-2"},E=["onClick"],L=["onClick"],N={key:0,class:"mt-6 p-4 border rounded bg-gray-50"},q={class:"font-semibold mb-2"},F={class:"mt-4"},I=["value","onChange"],j={class:"ml-1"},J={__name:"Roles",setup(T){const g=u([]),y=u([]),r=u({name:"",label:""}),o=u(null),b=u([]);async function v(){const l=await d.get("/api/roles");g.value=l.data}async function k(){const l=await d.get("/api/permissions");y.value=l.data}$(()=>{v(),k()});async function w(){await d.post("/api/roles",r.value),r.value={name:"",label:""},v()}function _(l){o.value={...l},b.value=l.permissions.map(s=>s.id)}async function R(){await d.put(`/api/roles/${o.value.id}`,o.value);for(const l of y.value){const s=b.value.includes(l.id),t=o.value.permissions.some(n=>n.id===l.id);s&&!t?await d.post(`/api/roles/${o.value.id}/assign-permission`,{permission_id:l.id}):!s&&t&&await d.post(`/api/roles/${o.value.id}/remove-permission`,{permission_id:l.id})}o.value=null,v()}async function C(l){await d.delete(`/api/roles/${l}`),v()}function z(l){}return(l,s)=>(i(),a("div",null,[s[10]||(s[10]=e("h1",{class:"text-2xl font-bold mb-4"},"Roles Management",-1)),e("div",P,[e("form",{onSubmit:h(w,["prevent"])},[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.name=t),placeholder:"Role name",class:"border p-2 mr-2",required:""},null,512),[[c,r.value.name]]),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.label=t),placeholder:"Label (optional)",class:"border p-2 mr-2"},null,512),[[c,r.value.label]]),s[6]||(s[6]=e("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded"},"Add Role",-1))],32)]),e("table",U,[s[7]||(s[7]=e("thead",null,[e("tr",null,[e("th",{class:"border px-4 py-2"},"Name"),e("th",{class:"border px-4 py-2"},"Label"),e("th",{class:"border px-4 py-2"},"Permissions"),e("th",{class:"border px-4 py-2"},"Actions")])],-1)),e("tbody",null,[(i(!0),a(x,null,f(g.value,t=>(i(),a("tr",{key:t.id},[e("td",S,m(t.name),1),e("td",A,m(t.label),1),e("td",B,[(i(!0),a(x,null,f(t.permissions,n=>(i(),a("span",{key:n.id,class:"inline-block bg-gray-200 rounded px-2 py-1 text-xs mr-1"},m(n.name),1))),128))]),e("td",D,[e("button",{onClick:n=>_(t),class:"text-blue-600 mr-2"},"Edit",8,E),e("button",{onClick:n=>C(t.id),class:"text-red-600"},"Delete",8,L)])]))),128))])]),o.value?(i(),a("div",N,[e("h2",q,"Edit Role: "+m(o.value.name),1),e("form",{onSubmit:h(R,["prevent"])},[p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.name=t),class:"border p-2 mr-2",required:""},null,512),[[c,o.value.name]]),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.label=t),class:"border p-2 mr-2"},null,512),[[c,o.value.label]]),s[8]||(s[8]=e("button",{type:"submit",class:"bg-green-600 text-white px-4 py-2 rounded"},"Save",-1)),e("button",{onClick:s[4]||(s[4]=t=>o.value=null),type:"button",class:"ml-2 px-4 py-2 rounded border"},"Cancel")],32),e("div",F,[s[9]||(s[9]=e("h3",{class:"font-semibold mb-1"},"Assign Permissions",-1)),e("div",null,[(i(!0),a(x,null,f(y.value,t=>(i(),a("label",{key:t.id,class:"inline-flex items-center mr-3"},[p(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":s[5]||(s[5]=n=>b.value=n),onChange:n=>(t.id,void 0)},null,40,I),[[M,b.value]]),e("span",j,m(t.name),1)]))),128))])])])):V("",!0)]))}};export{J as default};
