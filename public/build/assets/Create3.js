import{e as P,o as r,w as C,f as s,k as o,t as b,y as G,q as S,F as h,l as j,G as I,m as u,I as w,a as y,W as v}from"./vendor.js";import{D as A}from"./DashboardLayout.js";import{_ as B}from"./_plugin-vue_export-helper.js";import"./SidebarLink.js";import"./NotificationDropdown.js";import"./app.js";/* empty css    */const D={__name:"Create",props:{projectId:String},setup(x,{expose:t}){t();const i=x,e=u([]),m=u([]),d=u(!1),a=u("");async function n(){var c,p;d.value=!0,a.value="";try{const l=await y.get("/dashboard/members/groups/data");e.value=l.data.map(f=>({id:f.id,name:f.name,member_count:f.member_count||0}))}catch(l){a.value=((p=(c=l.response)==null?void 0:c.data)==null?void 0:p.message)||"Failed to load groups."}finally{d.value=!1}}async function g(){var c,p;if(m.value.length!==0){d.value=!0,a.value="";try{await y.post(`/dashboard/projects/${i.projectId}/participants`,{group_ids:m.value}),v.visit(`/dashboard/projects/${i.projectId}/edit?tab=Participants`,{onSuccess:()=>{alert("Participants added successfully!"),window.location.href=`/dashboard/projects/${i.projectId}/edit?tab=Participants`}})}catch(l){a.value="Failed to add participants: "+(((p=(c=l.response)==null?void 0:c.data)==null?void 0:p.error)||l.message)}finally{d.value=!1}}}function k(){v.visit(`/dashboard/projects/${i.projectId}/edit?tab=Participants`)}w(()=>{n()});const _={props:i,groups:e,selectedGroups:m,loading:d,error:a,fetchGroups:n,addParticipants:g,cancel:k,ref:u,onMounted:w,get router(){return v},get axios(){return y},DashboardLayout:A};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},F={class:"max-w-5xl mx-auto py-8"},L={key:0,class:"text-center text-gray-500"},M={key:1,class:"text-center text-red-500"},V={key:2},W={class:"bg-gray-50 rounded-lg p-6 border space-y-6"},q=["value"],N={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},E={class:"list-disc list-inside text-blue-600"},H={class:"flex justify-end gap-4"},O=["disabled"];function U(x,t,i,e,m,d){return r(),P(e.DashboardLayout,null,{default:C(()=>[s("div",F,[s("div",{class:"flex justify-between items-center mb-6"},[t[1]||(t[1]=s("h1",{class:"text-2xl font-bold"},"Add Participants to Project",-1)),s("button",{onClick:e.cancel,class:"px-4 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition"}," Back to Participants ")]),e.loading?(r(),o("div",L,"Loading groups...")):e.error?(r(),o("div",M,b(e.error),1)):(r(),o("div",V,[s("div",W,[s("div",null,[t[2]||(t[2]=s("h2",{class:"text-lg font-semibold mb-2"},"Select Groups to Add Participants",-1)),t[3]||(t[3]=s("p",{class:"text-gray-600 mb-4"}," Select one or more groups to add their members as participants to this project. All members of the selected groups will be added. ",-1)),t[4]||(t[4]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Groups*",-1)),S(s("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedGroups=a),multiple:"",class:"input w-full",required:""},[(r(!0),o(h,null,j(e.groups,a=>(r(),o("option",{key:a.id,value:a.id},b(a.name),9,q))),128))],512),[[I,e.selectedGroups]]),t[5]||(t[5]=s("p",{class:"text-sm text-gray-600 mt-1"},"Hold Ctrl (Windows) or Cmd (Mac) to select multiple groups.",-1))]),e.selectedGroups.length>0?(r(),o("div",N,[t[6]||(t[6]=s("h3",{class:"text-sm font-medium text-blue-800"},"Selected Groups:",-1)),s("ul",E,[(r(!0),o(h,null,j(e.selectedGroups,a=>{var n;return r(),o("li",{key:a},b((n=e.groups.find(g=>g.id===a))==null?void 0:n.name),1)}),128))])])):G("v-if",!0),s("div",H,[s("button",{type:"button",onClick:e.cancel,class:"px-6 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition"}," Cancel "),s("button",{onClick:e.addParticipants,type:"submit",class:"px-6 py-2 rounded bg-purple-600 text-white font-semibold hover:bg-purple-700 transition",disabled:e.loading||e.selectedGroups.length===0},b(e.loading?"Adding...":"Add Participants"),9,O)])])]))])]),_:1})}const Y=B(D,[["render",U],["__scopeId","data-v-175a9a95"],["__file","/var/www/html/resources/js/Pages/Projects/Participants/Create.vue"]]);export{Y as default};
