import{e as L,o as d,w as a,f as t,y as w,g as r,i,k as c,F as A,l as P,t as u,n as C,j as V,q as h,v as I,z as F,m as f,x as M,A as D,S as T}from"./vendor.js";import{A as U}from"./AdminLayout.js";import{M as j}from"./Modal.js";import{I as q}from"./InputLabel.js";import{T as O}from"./TextInput.js";import{I as z}from"./InputError.js";import{P as R}from"./PrimaryButton.js";import{S as G}from"./SecondaryButton.js";import{D as H}from"./DangerButton.js";import{r as p}from"./app.js";import{_ as J}from"./_plugin-vue_export-helper.js";import"./NotificationDropdown.js";/* empty css    */const K={__name:"News",props:{news:Array},setup(y,{expose:o}){o();const g=y,e=f(!1),m=f(!1),x=f(!1),s=f(null),n=M({title:"",excerpt:"",content:"",image_url:"",is_published:!0}),N=l=>D(new Date(l),"PPP"),E=(l,B)=>{n[B]=l.target.files[0]},b=()=>{e.value=!1,m.value=!1,n.reset(),n.clearErrors()},S=l=>{s.value=l,n.title=l.title,n.excerpt=l.excerpt,n.content=l.content,n.image_url=l.image_url,n.is_published=l.is_published,m.value=!0},_=async()=>{n.post(p("admin.content.news.create"),{onSuccess:()=>{b()}})},v=async()=>{n.put(p("admin.content.news.update"),{onSuccess:()=>{b()}})},k={props:g,showCreateModal:e,showEditModal:m,showDeleteModal:x,currentItem:s,form:n,formatDate:N,onFileChange:E,closeModal:b,editNewsItem:S,createNewsItem:_,updateNewsItem:v,submitForm:()=>{m.value?v():_()},confirmDelete:l=>{s.value=l,x.value=!0},deleteNewsItem:()=>{n.delete(p("admin.content.news.destroy",s.value.id),{onSuccess:()=>{x.value=!1}})},ref:f,get Link(){return T},get useForm(){return M},AdminLayout:U,Modal:j,InputLabel:q,TextInput:O,InputError:z,PrimaryButton:R,SecondaryButton:G,DangerButton:H,get route(){return p},get format(){return D}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},Q={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"mb-6"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Z={class:"p-6 bg-white border-b border-gray-200"},$={class:"flex justify-between items-center mb-6"},ee={class:"overflow-x-auto bg-white rounded-lg shadow overflow-y-auto"},te={class:"min-w-full divide-y divide-gray-200"},oe={class:"bg-white divide-y divide-gray-200"},se={class:"px-6 py-4"},re={class:"text-sm font-medium text-gray-900"},ne={class:"text-sm text-gray-500 truncate max-w-md"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-6 py-4 whitespace-nowrap"},ie={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},de={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"},me={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ce=["onClick"],ue=["onClick"],fe={key:0},ge={class:"mb-4"},xe={class:"mb-4"},we={class:"mb-4"},pe={class:"mb-4"},be={class:"mb-4 flex items-center"};function he(y,o,g,e,m,x){return d(),L(e.AdminLayout,{title:"News Management"},{default:a(()=>[t("div",Q,[t("div",W,[t("div",X,[r(e.Link,{href:e.route("admin.content.index"),class:"text-indigo-600 hover:text-indigo-900 flex items-center"},{default:a(()=>o[8]||(o[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),i(" Back to Content Management ")])),_:1},8,["href"])]),t("div",Y,[t("div",Z,[t("div",$,[o[9]||(o[9]=t("h1",{class:"text-2xl font-semibold text-gray-800"},"News Management",-1)),t("button",{onClick:o[0]||(o[0]=s=>e.showCreateModal=!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Add News Item ")]),t("div",ee,[t("table",te,[o[11]||(o[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",oe,[(d(!0),c(A,null,P(g.news,s=>(d(),c("tr",{key:s.id},[t("td",se,[t("div",re,u(s.title),1),t("div",ne,u(s.excerpt),1)]),t("td",le,u(e.formatDate(s.published_at)),1),t("td",ae,[s.is_published?(d(),c("span",ie," Published ")):(d(),c("span",de," Draft "))]),t("td",me,[t("button",{onClick:n=>e.editNewsItem(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,ce),t("button",{onClick:n=>e.confirmDelete(s),class:"text-red-600 hover:text-red-900"}," Delete ",8,ue)])]))),128)),g.news.length===0?(d(),c("tr",fe,o[10]||(o[10]=[t("td",{colspan:"4",class:"px-6 py-4 whitespace-nowrap text-center text-gray-500"}," No news items found ",-1)]))):w("v-if",!0)])])])])])])]),w(" Create/Edit Modal "),r(e.Modal,{show:e.showCreateModal||e.showEditModal,onClose:e.closeModal},{title:a(()=>[i(u(e.showEditModal?"Edit News Item":"Add News Item"),1)]),content:a(()=>[t("form",{onSubmit:V(e.submitForm,["prevent"])},[t("div",ge,[r(e.InputLabel,{for:"title",value:"Title"}),r(e.TextInput,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:e.form.title,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.title=s),required:"",autofocus:""},null,8,["modelValue"]),r(e.InputError,{message:e.form.errors.title,class:"mt-2"},null,8,["message"])]),t("div",xe,[r(e.InputLabel,{for:"excerpt",value:"Excerpt"}),h(t("textarea",{id:"excerpt",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":o[2]||(o[2]=s=>e.form.excerpt=s),rows:"2",required:""},null,512),[[I,e.form.excerpt]]),r(e.InputError,{message:e.form.errors.excerpt,class:"mt-2"},null,8,["message"])]),t("div",we,[r(e.InputLabel,{for:"content",value:"Content"}),h(t("textarea",{id:"content",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm","onUpdate:modelValue":o[3]||(o[3]=s=>e.form.content=s),rows:"6",required:""},null,512),[[I,e.form.content]]),r(e.InputError,{message:e.form.errors.content,class:"mt-2"},null,8,["message"])]),t("div",pe,[r(e.InputLabel,{for:"image_url",value:"Image URL"}),w(" TODO: add image upload "),t("input",{type:"file",onChange:o[4]||(o[4]=s=>e.onFileChange(s,"image_url"))},null,32),r(e.InputError,{message:e.form.errors.image_url,class:"mt-2"},null,8,["message"])]),t("div",be,[h(t("input",{id:"is_published",type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":o[5]||(o[5]=s=>e.form.is_published=s)},null,512),[[F,e.form.is_published]]),o[12]||(o[12]=t("label",{for:"is_published",class:"ml-2 block text-sm text-gray-900"}," Publish immediately ",-1))])],32)]),footer:a(()=>[r(e.SecondaryButton,{onClick:e.closeModal,class:"mr-3"},{default:a(()=>o[13]||(o[13]=[i(" Cancel ")])),_:1}),r(e.PrimaryButton,{onClick:e.submitForm,class:C({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:a(()=>[i(u(e.showEditModal?"Update":"Create"),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),w(" Delete Confirmation Modal "),r(e.Modal,{show:e.showDeleteModal,onClose:o[7]||(o[7]=s=>e.showDeleteModal=!1)},{title:a(()=>o[14]||(o[14]=[i("Delete News Item")])),content:a(()=>o[15]||(o[15]=[t("p",{class:"mb-6 text-gray-600"},"Are you sure you want to delete this news item? This action cannot be undone.",-1)])),footer:a(()=>[r(e.SecondaryButton,{onClick:o[6]||(o[6]=s=>e.showDeleteModal=!1),class:"mr-3"},{default:a(()=>o[16]||(o[16]=[i(" Cancel ")])),_:1}),r(e.DangerButton,{onClick:e.deleteNewsItem,class:C({"opacity-25":e.form.processing}),disabled:e.form.processing},{default:a(()=>o[17]||(o[17]=[i(" Delete ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]),_:1})}const Fe=J(K,[["render",he],["__file","/var/www/html/resources/js/Pages/Admin/Content/News.vue"]]);export{Fe as default};
