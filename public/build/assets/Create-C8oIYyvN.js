import{r as c,s as k,c as w,o as a,w as C,a as e,d as o,t as p,e as P,f as S,F as v,j as g,q as A,y,W as f}from"./app-BDDThPdq.js";import{D as B}from"./DashboardLayout-DX3pOCJ2.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./SidebarLink-BeQ8zajy.js";const I={class:"max-w-5xl mx-auto py-8"},D={key:0,class:"text-center text-gray-500"},F={key:1,class:"text-center text-red-500"},$={key:2},L={class:"bg-gray-50 rounded-lg p-6 border space-y-6"},M=["value"],V={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},W={class:"list-disc list-inside text-blue-600"},q={class:"flex justify-end gap-4"},N=["disabled"],E={__name:"Create",props:{projectId:String},setup(x){const u=x,m=c([]),r=c([]),l=c(!1),d=c("");async function h(){var i,t;l.value=!0,d.value="";try{const s=await y.get("/dashboard/members/groups/data");m.value=s.data.map(n=>({id:n.id,name:n.name,member_count:n.member_count||0}))}catch(s){d.value=((t=(i=s.response)==null?void 0:i.data)==null?void 0:t.message)||"Failed to load groups."}finally{l.value=!1}}async function _(){var i,t;if(r.value.length!==0){l.value=!0,d.value="";try{await y.post(`/dashboard/projects/${u.projectId}/participants`,{group_ids:r.value}),f.visit(`/dashboard/projects/${u.projectId}/edit?tab=Participants`,{onSuccess:()=>{alert("Participants added successfully!"),window.location.href=`/dashboard/projects/${u.projectId}/edit?tab=Participants`}})}catch(s){d.value="Failed to add participants: "+(((t=(i=s.response)==null?void 0:i.data)==null?void 0:t.error)||s.message)}finally{l.value=!1}}}function b(){f.visit(`/dashboard/projects/${u.projectId}/edit?tab=Participants`)}return k(()=>{h()}),(i,t)=>(a(),w(B,null,{default:C(()=>[e("div",I,[e("div",{class:"flex justify-between items-center mb-6"},[t[1]||(t[1]=e("h1",{class:"text-2xl font-bold"},"Add Participants to Project",-1)),e("button",{onClick:b,class:"px-4 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition"}," Back to Participants ")]),l.value?(a(),o("div",D,"Loading groups...")):d.value?(a(),o("div",F,p(d.value),1)):(a(),o("div",$,[e("div",L,[e("div",null,[t[2]||(t[2]=e("h2",{class:"text-lg font-semibold mb-2"},"Select Groups to Add Participants",-1)),t[3]||(t[3]=e("p",{class:"text-gray-600 mb-4"}," Select one or more groups to add their members as participants to this project. All members of the selected groups will be added. ",-1)),t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Groups*",-1)),S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),multiple:"",class:"input w-full",required:""},[(a(!0),o(v,null,g(m.value,s=>(a(),o("option",{key:s.id,value:s.id},p(s.name),9,M))),128))],512),[[A,r.value]]),t[5]||(t[5]=e("p",{class:"text-sm text-gray-600 mt-1"},"Hold Ctrl (Windows) or Cmd (Mac) to select multiple groups.",-1))]),r.value.length>0?(a(),o("div",V,[t[6]||(t[6]=e("h3",{class:"text-sm font-medium text-blue-800"},"Selected Groups:",-1)),e("ul",W,[(a(!0),o(v,null,g(r.value,s=>{var n;return a(),o("li",{key:s},p((n=m.value.find(j=>j.id===s))==null?void 0:n.name),1)}),128))])])):P("",!0),e("div",q,[e("button",{type:"button",onClick:b,class:"px-6 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition"}," Cancel "),e("button",{onClick:_,type:"submit",class:"px-6 py-2 rounded bg-purple-600 text-white font-semibold hover:bg-purple-700 transition",disabled:l.value||r.value.length===0},p(l.value?"Adding...":"Add Participants"),9,N)])])]))])]),_:1}))}},O=G(E,[["__scopeId","data-v-53dededc"]]);export{O as default};
