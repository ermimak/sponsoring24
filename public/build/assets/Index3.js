import{e as v,o as n,w as x,f as a,k as i,y as _,F as w,l as k,n as N,t as g,I as y,p as b,W as p}from"./vendor.js";import{r as h}from"./app.js";import{A}from"./AdminLayout.js";import{_ as M}from"./_plugin-vue_export-helper.js";/* empty css    */import"./NotificationDropdown.js";const I=f=>{const r=new Date(f),s=Math.floor((new Date-r)/1e3);if(s<60)return"just now";const d=Math.floor(s/60);if(d<60)return`${d} ${d===1?"minute":"minutes"} ago`;const c=Math.floor(d/60);if(c<24)return`${c} ${c===1?"hour":"hours"} ago`;const t=Math.floor(c/24);if(t<30)return`${t} ${t===1?"day":"days"} ago`;const l=Math.floor(t/30);if(l<12)return`${l} ${l===1?"month":"months"} ago`;const u=Math.floor(l/12);return`${u} ${u===1?"year":"years"} ago`},S={__name:"Index",props:{notifications:Object},setup(f,{expose:r}){r();const o=f;y(()=>{console.log("Admin notifications:",o.notifications),o.notifications&&o.notifications.data&&o.notifications.data.length>0&&(console.log("First notification:",o.notifications.data[0]),console.log("First notification data:",o.notifications.data[0].data))});const s=b(()=>o.notifications.data.filter(e=>!e.read_at).length),u={props:o,unreadCount:s,getNotificationTitle:e=>{if(!e||!e.data)return"Notification";const m=e.data;if(!m.type)return m.message||"Notification";switch(m.type){case"user_registered":return"New User Registration";case"user_updated":return"User Profile Updated";case"project_created":return"New Project Created";case"project_updated":return"Project Updated";case"payment_received":return"Payment Received";case"new_donation":return"New Donation";default:return m.message||"Notification"}},getNotificationMessage:e=>!e||!e.data?"":e.data.message||"",markAsRead:e=>{p.post(h("admin.notifications.mark-as-read",{notification:e.id}),{},{preserveScroll:!0,onSuccess:()=>{e.read_at=new Date().toISOString()}})},markAllAsRead:()=>{p.post(h("admin.notifications.mark-all-as-read"),{},{preserveScroll:!0,onSuccess:()=>{o.notifications.forEach(e=>{e.read_at||(e.read_at=new Date().toISOString())})}})},computed:b,get router(){return p},get route(){return h},AdminLayout:A,get formatDate(){return I},onMounted:y};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},D={class:"py-12"},j={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},C={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6 bg-white border-b border-gray-200"},P={class:"flex justify-between items-center mb-6"},U={key:0,class:"text-center py-8 text-gray-500"},$={key:1,class:"space-y-4"},B={class:"flex justify-between items-start"},F={class:"font-medium text-gray-900"},O={class:"text-sm text-gray-600 mt-1"},L={class:"flex items-center mt-2"},T={class:"text-xs text-gray-500"},E={key:0,class:"ml-3 px-2 py-1 bg-gray-100 text-xs rounded-full text-gray-600"},V=["onClick"];function W(f,r,o,s,d,c){return n(),v(s.AdminLayout,{title:"Notifications"},{header:x(()=>r[0]||(r[0]=[a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Notifications ",-1)])),default:x(()=>[a("div",D,[a("div",j,[a("div",C,[a("div",R,[a("div",P,[r[1]||(r[1]=a("h3",{class:"text-lg font-medium text-gray-900"},"All Notifications",-1)),s.unreadCount>0?(n(),i("button",{key:0,onClick:s.markAllAsRead,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-sm font-medium rounded-md hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Mark all as read ")):_("v-if",!0)]),!o.notifications.data||o.notifications.data.length===0?(n(),i("div",U," No notifications to display ")):(n(),i("div",$,[(n(!0),i(w,null,k(o.notifications.data,t=>(n(),i("div",{key:t.id,class:N(["p-4 border rounded-md transition-colors duration-200",{"bg-blue-50 border-blue-200":!t.read_at,"border-gray-200":t.read_at}])},[a("div",B,[a("div",null,[a("h4",F,g(s.getNotificationTitle(t)),1),a("p",O,g(s.getNotificationMessage(t)),1),a("div",L,[a("span",T,g(s.formatDate(t.created_at)),1),t.data.user_id?(n(),i("span",E," User ID: "+g(t.data.user_id),1)):_("v-if",!0)])]),t.read_at?_("v-if",!0):(n(),i("button",{key:0,onClick:l=>s.markAsRead(t),class:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Mark as read ",8,V))])],2))),128))]))])])])])]),_:1})}const K=M(S,[["render",W],["__file","/var/www/html/resources/js/Pages/Admin/Notifications/Index.vue"]]);export{K as default};
