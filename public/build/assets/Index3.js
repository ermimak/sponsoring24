import{I as x,J as y,e as b,o as r,w as _,f as e,l as n,y as m,F as w,m as v,n as k,t as f,u as N,W as p}from"./vendor.js";import{r as h}from"./app.js";import{_ as M}from"./AdminLayout.js";/* empty css    */import"./NotificationDropdown.js";const $=i=>{const o=new Date(i),u=Math.floor((new Date-o)/1e3);if(u<60)return"just now";const d=Math.floor(u/60);if(d<60)return`${d} ${d===1?"minute":"minutes"} ago`;const c=Math.floor(d/60);if(c<24)return`${c} ${c===1?"hour":"hours"} ago`;const l=Math.floor(c/24);if(l<30)return`${l} ${l===1?"day":"days"} ago`;const t=Math.floor(l/30);if(t<12)return`${t} ${t===1?"month":"months"} ago`;const s=Math.floor(t/12);return`${s} ${s===1?"year":"years"} ago`},I={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},D={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},j={class:"p-6 bg-white border-b border-gray-200"},C={class:"flex justify-between items-center mb-6"},A={key:0,class:"text-center py-8 text-gray-500"},U={key:1,class:"space-y-4"},B={class:"flex justify-between items-start"},F={class:"font-medium text-gray-900"},P={class:"text-sm text-gray-600 mt-1"},R={class:"flex items-center mt-2"},O={class:"text-xs text-gray-500"},E={key:0,class:"ml-3 px-2 py-1 bg-gray-100 text-xs rounded-full text-gray-600"},V=["onClick"],Y={__name:"Index",props:{notifications:Object},setup(i){const o=i;x(()=>{console.log("Admin notifications:",o.notifications),o.notifications&&o.notifications.data&&o.notifications.data.length>0&&(console.log("First notification:",o.notifications.data[0]),console.log("First notification data:",o.notifications.data[0].data))});const g=y(()=>o.notifications.data.filter(t=>!t.read_at).length),u=t=>{if(!t||!t.data)return"Notification";const s=t.data;if(!s.type)return s.message||"Notification";switch(s.type){case"user_registered":return"New User Registration";case"user_updated":return"User Profile Updated";case"project_created":return"New Project Created";case"project_updated":return"Project Updated";case"payment_received":return"Payment Received";case"new_donation":return"New Donation";default:return s.message||"Notification"}},d=t=>!t||!t.data?"":t.data.message||"",c=t=>{p.post(h("admin.notifications.mark-as-read",{notification:t.id}),{},{preserveScroll:!0,onSuccess:()=>{t.read_at=new Date().toISOString()}})},l=()=>{p.post(h("admin.notifications.mark-all-as-read"),{},{preserveScroll:!0,onSuccess:()=>{o.notifications.forEach(t=>{t.read_at||(t.read_at=new Date().toISOString())})}})};return(t,s)=>(r(),b(M,{title:"Notifications"},{header:_(()=>s[0]||(s[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Notifications ",-1)])),default:_(()=>[e("div",I,[e("div",S,[e("div",D,[e("div",j,[e("div",C,[s[1]||(s[1]=e("h3",{class:"text-lg font-medium text-gray-900"},"All Notifications",-1)),g.value>0?(r(),n("button",{key:0,onClick:l,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-sm font-medium rounded-md hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Mark all as read ")):m("",!0)]),!i.notifications.data||i.notifications.data.length===0?(r(),n("div",A," No notifications to display ")):(r(),n("div",U,[(r(!0),n(w,null,v(i.notifications.data,a=>(r(),n("div",{key:a.id,class:k(["p-4 border rounded-md transition-colors duration-200",{"bg-blue-50 border-blue-200":!a.read_at,"border-gray-200":a.read_at}])},[e("div",B,[e("div",null,[e("h4",F,f(u(a)),1),e("p",P,f(d(a)),1),e("div",R,[e("span",O,f(N($)(a.created_at)),1),a.data.user_id?(r(),n("span",E," User ID: "+f(a.data.user_id),1)):m("",!0)])]),a.read_at?m("",!0):(r(),n("button",{key:0,onClick:W=>c(a),class:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Mark as read ",8,V))])],2))),128))]))])])])])]),_:1}))}};export{Y as default};
