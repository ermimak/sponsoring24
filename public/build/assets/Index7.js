import{D as _}from"./DashboardLayout.js";import{J as z,f as L,o as n,w as y,l as r,y as f,g as t,t as o,n as c,j as x,F as R,m as H,i as D,u as v,S as G}from"./vendor.js";import{r as B}from"./app.js";import"./SidebarLink.js";import"./NotificationDropdown.js";import"./_plugin-vue_export-helper.js";/* empty css    */const I={key:0,class:"mb-4 p-4 bg-gray-100 rounded-lg text-xs overflow-auto max-h-40"},N={class:"py-6"},$={class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},S={class:"mt-8"},A={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},F={class:"bg-white overflow-hidden shadow rounded-lg"},U={class:"p-5"},E={class:"flex items-center"},T={class:"ml-5 w-0 flex-1"},J={class:"flex items-baseline"},O={class:"text-2xl font-semibold text-gray-900"},Q={key:1,class:"self-center flex-shrink-0 h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},q={class:"sr-only"},K={class:"bg-white overflow-hidden shadow rounded-lg"},W={class:"p-5"},X={class:"flex items-center"},Y={class:"ml-5 w-0 flex-1"},Z={class:"flex items-baseline"},tt={class:"text-2xl font-semibold text-gray-900"},et={key:1,class:"self-center flex-shrink-0 h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},st={class:"sr-only"},ot={class:"bg-white overflow-hidden shadow rounded-lg"},lt={class:"p-5"},nt={class:"flex items-center"},rt={class:"ml-5 w-0 flex-1"},at={class:"flex items-baseline"},it={class:"text-2xl font-semibold text-gray-900"},dt={key:1,class:"self-center flex-shrink-0 h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},ut={class:"sr-only"},ct={class:"bg-white overflow-hidden shadow rounded-lg"},mt={class:"p-5"},ft={class:"flex items-center"},xt={class:"ml-5 w-0 flex-1"},ht={class:"flex items-baseline"},vt={class:"text-2xl font-semibold text-gray-900"},gt={key:0,class:"ml-2 flex items-baseline text-sm font-semibold text-yellow-600"},wt={class:"mt-8"},yt={class:"mt-2 bg-white shadow overflow-hidden sm:rounded-md"},bt={key:0,role:"list",class:"divide-y divide-gray-200"},kt={class:"px-4 py-4 sm:px-6"},pt={class:"flex items-center justify-between"},Mt={class:"text-sm font-medium text-blue-600 truncate"},Ct={class:"ml-2 flex-shrink-0 flex"},jt={class:"mt-2 sm:flex sm:justify-between"},Vt={class:"sm:flex"},Dt={class:"flex items-center text-sm text-gray-500"},Gt={class:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0"},Bt={class:"mt-2 text-sm text-gray-700"},Pt={class:"font-medium"},_t={key:1,class:"py-8 text-center text-gray-500"},zt={key:1,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between"},At={__name:"Index",props:{notifications:{type:Array,default:()=>[]},unreadNotificationsCount:{type:Number,default:0},stats:{type:Object,default:()=>({activeLicense:null,projectsCount:0,totalDonations:0,referrals:{totalReferrals:0,creditedReferrals:0,pendingReferrals:0,totalEarned:0},newUsersCount:0,newUsersGrowth:0})},recentProjects:{type:Array,default:()=>[]}},setup(s){const a=s,g=(l,e="CHF")=>new Intl.NumberFormat("de-CH",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(l),b=l=>{const e=new Date(l),h=Math.floor((new Date-e)/1e3);if(h<60)return"just now";const d=Math.floor(h/60);if(d<60)return`${d} ${d===1?"minute":"minutes"} ago`;const u=Math.floor(d/60);if(u<24)return`${u} ${u===1?"hour":"hours"} ago`;const m=Math.floor(u/24);return m<30?`${m} ${m===1?"day":"days"} ago`:e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},P=l=>{switch(l){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=z(()=>(console.log("Recent projects from props:",a.recentProjects),!a.recentProjects||a.recentProjects.length===0?(console.log("No recent projects found"),[]):a.recentProjects.map(l=>(console.log("Processing project:",l),{id:l.id,title:l.name,description:`Last updated ${b(l.updated_at)}`,status:l.status?l.status.charAt(0).toUpperCase()+l.status.slice(1):"Unknown",statusClass:P(l.status||"unknown"),date:b(l.updated_at),amount:g(l.total_raised||0)}))));return(l,e)=>(n(),L(_,null,{default:y(()=>{var w,h,d,u,m,p,M,C,j,V;return[((d=(h=(w=l.$page.props)==null?void 0:w.auth)==null?void 0:h.user)==null?void 0:d.email)==="admin@example.com"?(n(),r("div",I,[e[0]||(e[0]=t("p",{class:"font-bold"},"Debug Info:",-1)),t("p",null,"Projects Count: "+o(((u=a.stats)==null?void 0:u.projectsCount)||0),1),t("p",null,"Total Donations: "+o(((m=a.stats)==null?void 0:m.totalDonations)||0),1),t("p",null,"Recent Projects Count: "+o(((p=a.recentProjects)==null?void 0:p.length)||0),1),t("p",null,"Recent Projects: "+o(JSON.stringify(a.recentProjects||[])),1)])):f("",!0),t("div",N,[e[23]||(e[23]=t("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},[t("h1",{class:"text-2xl font-semibold text-gray-900"},"Dashboard")],-1)),t("div",$,[t("div",S,[t("div",A,[t("div",F,[t("div",U,[t("div",E,[e[4]||(e[4]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",T,[t("dl",null,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Donations",-1)),t("dd",J,[t("div",O,o(g(s.stats.totalDonations)),1),s.stats.donationsGrowth!==0?(n(),r("div",{key:0,class:c(["ml-2 flex items-baseline text-sm font-semibold",s.stats.donationsGrowth>=0?"text-green-600":"text-red-600"])},[s.stats.donationsGrowth>=0?(n(),r("svg",{key:0,class:c(["self-center flex-shrink-0 h-5 w-5",s.stats.donationsGrowth>=0?"text-green-500":"text-red-500"]),fill:"currentColor",viewBox:"0 0 20 20"},e[1]||(e[1]=[t("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2)):(n(),r("svg",Q,e[2]||(e[2]=[t("path",{"fill-rule":"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))),t("span",q,o(s.stats.donationsGrowth>=0?"Increased":"Decreased")+" by",1),x(" "+o(Math.abs(s.stats.donationsGrowth))+"% ",1)],2)):f("",!0)])])])])])]),t("div",K,[t("div",W,[t("div",X,[e[8]||(e[8]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),t("div",Y,[t("dl",null,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Projects",-1)),t("dd",Z,[t("div",tt,o(s.stats.projectsCount),1),s.stats.projectsGrowth!==0?(n(),r("div",{key:0,class:c(["ml-2 flex items-baseline text-sm font-semibold",s.stats.projectsGrowth>=0?"text-green-600":"text-red-600"])},[s.stats.projectsGrowth>=0?(n(),r("svg",{key:0,class:c(["self-center flex-shrink-0 h-5 w-5",s.stats.projectsGrowth>=0?"text-green-500":"text-red-500"]),fill:"currentColor",viewBox:"0 0 20 20"},e[5]||(e[5]=[t("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2)):(n(),r("svg",et,e[6]||(e[6]=[t("path",{"fill-rule":"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))),t("span",st,o(s.stats.projectsGrowth>=0?"Increased":"Decreased")+" by",1),x(" "+o(Math.abs(s.stats.projectsGrowth)),1)],2)):f("",!0)])])])])])]),t("div",ot,[t("div",lt,[t("div",nt,[e[12]||(e[12]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",rt,[t("dl",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Donors",-1)),t("dd",at,[t("div",it,o(s.stats.referrals.totalReferrals),1),s.stats.referralsGrowth!==0?(n(),r("div",{key:0,class:c(["ml-2 flex items-baseline text-sm font-semibold",s.stats.referralsGrowth>=0?"text-green-600":"text-red-600"])},[s.stats.referralsGrowth>=0?(n(),r("svg",{key:0,class:c(["self-center flex-shrink-0 h-5 w-5",s.stats.referralsGrowth>=0?"text-green-500":"text-red-500"]),fill:"currentColor",viewBox:"0 0 20 20"},e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2)):(n(),r("svg",dt,e[10]||(e[10]=[t("path",{"fill-rule":"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))),t("span",ut,o(s.stats.referralsGrowth>=0?"Increased":"Decreased")+" by",1),x(" "+o(Math.abs(s.stats.referralsGrowth))+"% ",1)],2)):f("",!0)])])])])])]),t("div",ct,[t("div",mt,[t("div",ft,[e[16]||(e[16]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",xt,[t("dl",null,[e[15]||(e[15]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Referral Earnings",-1)),t("dd",ht,[t("div",vt,o(g(s.stats.referrals.totalEarned)),1),s.stats.referrals.pendingReferrals>0?(n(),r("div",gt,[e[13]||(e[13]=t("svg",{class:"self-center flex-shrink-0 h-5 w-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[14]||(e[14]=t("span",{class:"sr-only"},"Pending",-1)),x(" "+o(s.stats.referrals.pendingReferrals)+" pending ",1)])):f("",!0)])])])])])])])]),t("div",wt,[e[22]||(e[22]=t("h2",{class:"text-lg leading-6 font-medium text-gray-900"},"Recent Projects",-1)),t("div",yt,[k.value.length>0?(n(),r("ul",bt,[(n(!0),r(R,null,H(k.value,i=>(n(),r("li",{key:i.id},[D(v(G),{href:v(B)("dashboard.projects.show",i.id),class:"block hover:bg-gray-50"},{default:y(()=>[t("div",kt,[t("div",pt,[t("p",Mt,o(i.title),1),t("div",Ct,[t("p",{class:c(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",i.statusClass])},o(i.status),3)])]),t("div",jt,[t("div",Vt,[t("p",Dt,o(i.description),1)]),t("div",Gt,[e[17]||(e[17]=t("svg",{class:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("p",null,o(i.date),1)])]),t("div",Bt,[t("span",Pt,o(i.amount),1),e[18]||(e[18]=x(" raised "))])])]),_:2},1032,["href"])]))),128))])):(n(),r("div",_t,[e[20]||(e[20]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),e[21]||(e[21]=t("p",null,"No projects yet",-1)),D(v(G),{href:v(B)("dashboard.projects.create"),class:"mt-3 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:y(()=>e[19]||(e[19]=[x(" Create your first project ")])),_:1},8,["href"])]))])])])]),(V=(j=(C=(M=l.$page.props)==null?void 0:M.auth)==null?void 0:C.user)==null?void 0:j.permissions)!=null&&V.includes("manage_users")?(n(),r("div",zt,e[24]||(e[24]=[t("div",null,[t("span",{class:"font-semibold text-blue-800"},"Admin Quick Actions:"),t("a",{href:"/dashboard/admin/roles",class:"ml-4 text-blue-700 hover:underline"},"Manage Roles"),t("a",{href:"/dashboard/admin/permissions",class:"ml-4 text-blue-700 hover:underline"},"Manage Permissions")],-1)]))):f("",!0)]}),_:1}))}};export{At as default};
