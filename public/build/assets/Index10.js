import{J as M,f as $,o as r,w as g,g as s,l as a,y as h,F as D,m as N,n as S,t as m,W as y}from"./vendor.js";import{r as _}from"./app.js";import{D as I}from"./DashboardLayout.js";/* empty css    */import"./SidebarLink.js";import"./NotificationDropdown.js";import"./_plugin-vue_export-helper.js";const j={class:"bg-white rounded-lg shadow-sm p-6"},C={class:"flex justify-between items-center mb-6"},B={key:0,class:"text-center py-8 text-gray-500"},R={key:1,class:"space-y-4"},P={class:"flex justify-between items-start"},E={class:"font-medium text-gray-900"},F={class:"text-sm text-gray-600 mt-1"},L={class:"text-xs text-gray-500 mt-2"},O=["onClick"],Y={__name:"Index",props:{notifications:{type:Array,default:()=>[]}},setup(u){const l=u,b=M(()=>Array.isArray(l.notifications)?l.notifications.filter(t=>!t.read_at).length:0),x=t=>{const e=new Date(t),f=Math.floor((new Date-e)/1e3);if(f<60)return"just now";const n=Math.floor(f/60);if(n<60)return`${n} ${n===1?"minute":"minutes"} ago`;const i=Math.floor(n/60);if(i<24)return`${i} ${i===1?"hour":"hours"} ago`;const c=Math.floor(i/24);if(c<30)return`${c} ${c===1?"day":"days"} ago`;const d=Math.floor(c/30);if(d<12)return`${d} ${d===1?"month":"months"} ago`;const p=Math.floor(d/12);return`${p} ${p===1?"year":"years"} ago`},v=t=>{const e=t.data;switch(e.type){case"account_approval":return"Account Approved";case"account_pending":return"Account Pending";case"account_rejection":return"Account Rejected";case"payment_received":return"Payment Received";case"project_update":return"Project Update";case"new_donation":return"New Donation";default:return e.message||"Notification"}},k=t=>t.data.message||"",w=t=>{y.post(_("dashboard.notifications.mark-as-read",{notification:t.id}),{},{preserveScroll:!0,onSuccess:()=>{t.read_at=new Date().toISOString()}})},A=()=>{y.post(_("dashboard.notifications.mark-all-as-read"),{},{preserveScroll:!0,onSuccess:()=>{l.notifications.forEach(t=>{t.read_at||(t.read_at=new Date().toISOString())})}})};return(t,e)=>(r(),$(I,{title:"Notifications"},{breadcrumbs:g(()=>e[0]||(e[0]=[s("h2",{class:"text-xl font-semibold text-gray-800"}," Notifications ",-1)])),default:g(()=>[s("div",j,[s("div",C,[e[1]||(e[1]=s("h3",{class:"text-lg font-medium text-gray-900"},"All Notifications",-1)),b.value>0?(r(),a("button",{key:0,onClick:A,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white text-sm font-medium rounded-md hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Mark all as read ")):h("",!0)]),u.notifications.length===0?(r(),a("div",B," No notifications to display ")):(r(),a("div",R,[(r(!0),a(D,null,N(u.notifications,o=>(r(),a("div",{key:o.id,class:S(["p-4 border rounded-md transition-colors duration-200",{"bg-blue-50 border-blue-200":!o.read_at,"border-gray-200":o.read_at}])},[s("div",P,[s("div",null,[s("h4",E,m(v(o)),1),s("p",F,m(k(o)),1),s("p",L,m(x(o.created_at)),1)]),o.read_at?h("",!0):(r(),a("button",{key:0,onClick:f=>w(o),class:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Mark as read ",8,O))])],2))),128))]))])]),_:1}))}};export{Y as default};
