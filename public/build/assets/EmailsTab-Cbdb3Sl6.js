import{r as p,B as U,s as H,d as i,o as r,a as t,e as x,h as g,t as o,F as L,j as D,b as z,f as n,q as R,l as K,v,g as S,y as _}from"./app-BDDThPdq.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const W={class:"flex justify-between items-center mb-4"},G={class:"text-xl font-semibold"},J={class:"text-gray-500"},Q={class:"min-w-full divide-y divide-gray-200 bg-white rounded-lg border mb-4"},X={class:"bg-gray-50"},Y={key:0},Z={key:0},ee={key:0},te={class:"px-6 py-4"},le={class:"px-6 py-4"},se={class:"px-6 py-4"},ae={class:"px-6 py-4 flex space-x-2"},oe=["onClick"],ne=["onClick"],ie={key:0},re={class:"flex justify-between items-center"},de={class:"text-sm text-gray-500"},ue={class:"flex space-x-2"},pe=["disabled"],me=["disabled"],ve={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},ce={class:"bg-white rounded-lg shadow-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto"},fe={class:"text-xl font-bold mb-4"},be={class:"mb-2"},xe={class:"mb-2"},ge={class:"mb-2"},ye={class:"mb-2"},he={class:"mt-2 flex items-center"},we={class:"mt-2 flex items-center"},_e={class:"mb-2"},ke={class:"mb-2"},je={class:"mt-2 flex items-center"},Ce={class:"mb-2"},Se={class:"mb-2"},Ve={class:"mb-2"},Ee={class:"flex gap-2 justify-end mt-4"},Te=["disabled"],Me={key:0,class:"text-gray-500"},Ue={key:1,class:"text-red-600"},V=5,Pe={__name:"EmailsTab",props:{projectId:String},setup(P){const E=P,c=p([]),y=p(!1),w=p(!1),s=p({id:null,type:"",name:"",subject:"",body:"",footer:"",notes:"",show_logo:!1,show_header_image:!1,show_placeholders:!1,regarding:"",reply_to:"",sender_name:""}),d=p(!1),u=p(""),m=p(1),h=p("name"),f=p("asc");async function k(){var a,e;d.value=!0,u.value="";try{const{data:l}=await _.get("/dashboard/email-templates",{params:{project_id:E.projectId}});l.error?(u.value=l.error,c.value=[]):c.value=l.data||l}catch(l){u.value="Failed to load email templates: "+(((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.error)||l.message),c.value=[]}finally{d.value=!1}}function B(){w.value=!1,s.value={id:null,type:"",name:"",subject:"",body:"",footer:"",notes:"",show_logo:!1,show_header_image:!1,show_placeholders:!1,regarding:"",reply_to:"",sender_name:""},y.value=!0}function N(a){w.value=!0,s.value={...a},y.value=!0}function $(){y.value=!1}async function F(){var a,e;d.value=!0,u.value="";try{const l={...s.value,project_id:E.projectId};w.value?await _.put(`/dashboard/email-templates/${s.value.id}`,l):await _.post("/dashboard/email-templates",l),y.value=!1,k()}catch(l){u.value="Failed to save email template: "+(((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.error)||l.message)}finally{d.value=!1}}async function q(a){var e,l;d.value=!0,u.value="";try{await _.delete(`/dashboard/email-templates/${a}`),k()}catch(b){u.value="Failed to delete email template: "+(((l=(e=b.response)==null?void 0:e.data)==null?void 0:l.error)||b.message)}finally{d.value=!1}}function j(a){h.value===a?f.value=f.value==="asc"?"desc":"asc":(h.value=a,f.value="asc"),c.value.sort((e,l)=>{let b=e[a],M=l[a];return f.value==="asc"?b.localeCompare(M):M.localeCompare(b)})}const T=U(()=>{const a=(m.value-1)*V,e=a+V;return c.value.slice(a,e)}),C=U(()=>Math.ceil(c.value.length/V));function I(){m.value>1&&m.value--}function A(){m.value<C.value&&m.value++}return H(k),(a,e)=>(r(),i("div",null,[t("div",W,[t("h2",G,[e[15]||(e[15]=g("Emails ")),t("span",J,"("+o(c.value.length)+" entries)",1)]),t("button",{onClick:B,class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded flex items-center"},e[16]||(e[16]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),g(" Add Email Template ")]))]),t("table",Q,[t("thead",X,[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:e[0]||(e[0]=l=>j("name"))},[e[17]||(e[17]=g("Name ")),h.value==="name"?(r(),i("span",Y,o(f.value==="asc"?"↑":"↓"),1)):x("",!0)]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:e[1]||(e[1]=l=>j("type"))},[e[18]||(e[18]=g("Type ")),h.value==="type"?(r(),i("span",Z,o(f.value==="asc"?"↑":"↓"),1)):x("",!0)]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:e[2]||(e[2]=l=>j("subject"))},[e[19]||(e[19]=g("Subject ")),h.value==="subject"?(r(),i("span",ee,o(f.value==="asc"?"↑":"↓"),1)):x("",!0)]),e[20]||(e[20]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions",-1))])]),t("tbody",null,[(r(!0),i(L,null,D(T.value,l=>(r(),i("tr",{key:l.id,class:"hover:bg-gray-50"},[t("td",te,o(l.name),1),t("td",le,o(l.type),1),t("td",se,o(l.subject),1),t("td",ae,[t("button",{onClick:b=>N(l),class:"text-indigo-600 hover:text-indigo-900 flex items-center"},e[21]||(e[21]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),g(" Edit ")]),8,oe),t("button",{onClick:b=>q(l.id),class:"text-red-600 hover:text-red-900 flex items-center"},e[22]||(e[22]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Delete ")]),8,ne)])]))),128)),T.value.length===0?(r(),i("tr",ie,e[23]||(e[23]=[t("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-400"},"No email templates found",-1)]))):x("",!0)])]),t("div",re,[t("div",de,"Page "+o(m.value)+" of "+o(C.value)+" entries total",1),t("div",ue,[t("button",{onClick:I,disabled:m.value===1,class:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50"},"Prev",8,pe),t("button",{onClick:A,disabled:m.value===C.value,class:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50"},"Next",8,me)])]),y.value?(r(),i("div",ve,[t("div",ce,[t("h2",fe,o(w.value?"Edit":"Create")+" Email",1),t("form",{onSubmit:z(F,["prevent"]),class:"space-y-4"},[t("div",be,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium mb-1"},"Type",-1)),n(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.type=l),class:"input w-full",required:""},e[24]||(e[24]=[K('<option value="" disabled data-v-4f323084>Select type</option><option value="participant_invitation" data-v-4f323084>Participant invitation</option><option value="participant_differential_calculation" data-v-4f323084>Participant differential calculation</option><option value="supporter_invitation" data-v-4f323084>Supporter invitation</option><option value="supporter_bill" data-v-4f323084>Supporter bill</option><option value="supporter_payment_reminder" data-v-4f323084>Supporter payment reminder</option>',6)]),512),[[R,s.value.type]])]),t("div",xe,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium mb-1"},"Name",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.name=l),type:"text",class:"input w-full",required:"",placeholder:"e.g., Teilnehmer Einladung"},null,512),[[v,s.value.name]])]),t("div",ge,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-1"},"Subject",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.subject=l),type:"text",class:"input w-full",required:"",placeholder:"e.g., Invitation to project"},null,512),[[v,s.value.subject]])]),t("div",ye,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium mb-1"},"Email message",-1)),n(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.body=l),class:"input w-full",rows:"5",required:"",placeholder:"Enter email body..."},null,512),[[v,s.value.body]]),t("div",he,[n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.show_logo=l),type:"checkbox",id:"show_logo",class:"mr-2"},null,512),[[S,s.value.show_logo]]),e[28]||(e[28]=t("label",{for:"show_logo",class:"text-sm"},"Show logo",-1))]),t("div",we,[n(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.show_header_image=l),type:"checkbox",id:"show_header_image",class:"mr-2"},null,512),[[S,s.value.show_header_image]]),e[29]||(e[29]=t("label",{for:"show_header_image",class:"text-sm"},"Show project header image",-1))])]),t("div",_e,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium mb-1"},"E-Mail Footer",-1)),n(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.footer=l),class:"input w-full",rows:"3",placeholder:"Enter footer text..."},null,512),[[v,s.value.footer]])]),t("div",ke,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium mb-1"},"Email notes",-1)),n(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.notes=l),class:"input w-full",rows:"3",placeholder:"Enter notes..."},null,512),[[v,s.value.notes]]),t("div",je,[n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.show_placeholders=l),type:"checkbox",id:"show_placeholders",class:"mr-2"},null,512),[[S,s.value.show_placeholders]]),e[32]||(e[32]=t("label",{for:"show_placeholders",class:"text-sm"},"Show available placeholders",-1))])]),t("div",Ce,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium mb-1"},"Regarding",-1)),n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.regarding=l),type:"text",class:"input w-full",placeholder:"e.g., Weihnachten für alle"},null,512),[[v,s.value.regarding]])]),t("div",Se,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium mb-1"},"Reply To",-1)),n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.reply_to=l),type:"email",class:"input w-full",placeholder:"e.g., reto.schaufelberger@cheselhaus.ch"},null,512),[[v,s.value.reply_to]])]),t("div",Ve,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium mb-1"},"Sender name",-1)),n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.sender_name=l),type:"text",class:"input w-full",placeholder:"e.g., Cheselhaus Events"},null,512),[[v,s.value.sender_name]])]),t("div",Ee,[t("button",{type:"button",onClick:$,class:"bg-gray-200 text-gray-700 px-4 py-2 rounded"},"Cancel"),t("button",{type:"submit",class:"bg-purple-600 text-white px-4 py-2 rounded",disabled:d.value},o(d.value?"Saving...":"Save"),9,Te)])],32),d.value?(r(),i("div",Me,"Loading...")):x("",!0),u.value?(r(),i("div",Ue,o(u.value),1)):x("",!0)])])):x("",!0)]))}},Fe=O(Pe,[["__scopeId","data-v-4f323084"]]);export{Fe as default};
